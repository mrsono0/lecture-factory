name: "Material Writing Pipeline - Session-Based Aggregation"
description: "ì„¸ì…˜ë³„ ê°œë³„ ì§‘í•„ í›„ ì·¨í•©í•˜ëŠ” êµì•ˆ ì‘ì„± ì›Œí¬í”Œë¡œìš° (Writer Team) âš ï¸ MUST ANALYZE CONTEXT: If a local folder is provided, analyze its contents using list_dir/read_file BEFORE proceeding."
version: "5.0"

output_path: "{YYYY-MM-DD_ê°•ì˜ì œëª©}/02_Material/ê°•ì˜êµì•ˆ_v1.0.md"
max_retries: 2

# â”€â”€ ì„¸ì…˜ ê¸°ë°˜ ì§‘í•„ ì •ì±… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
session_writing_policy:
  enabled: true
  input_format: "session_based"
  
  # ì…ë ¥ íŒŒì¼ ìœ„ì¹˜
  input_sources:
    curriculum_plan: "01_Planning/ê°•ì˜êµ¬ì„±ì•ˆ.md"
    trend_report: "01_Planning/Trend_Report.md"
    reference_materials: "ì°¸ê³ ìë£Œ/"
  
  # ì¶œë ¥ êµ¬ì¡°
  output_structure:
    individual_sessions: "02_Material/sessions/ì„¸ì…˜-{ë²ˆí˜¸:03d}-{ì œëª©}_v1.0.md"
    aggregated_material: "02_Material/ê°•ì˜êµì•ˆ_v1.0.md"
    visual_specs: "02_Material/visual_specs/"
    packets: "02_Material/packets/"
    reports: "02_Material/reports/"
  
  # ì„¸ì…˜ ì§‘í•„ ìµœì í™” ì„¤ì •
  session_optimized:
    session_duration: "60-90min"
    estimated_chars: "no_limit"
    min_chars_per_session: null
    max_chars_per_session: null
    structure: "7_section_mandatory"
    writing_style: "continuous_prose"  # ê°œì¡°ì‹ ê¸ˆì§€, ì„œìˆ í˜• í•„ìˆ˜
    tone: "friendly_spoken_korean"   # ~í•´ìš”, ~ì…ë‹ˆë‹¤
    
  rules:
    - "ë‹¨ì¼ ì„¸ì…˜ ì§‘ì¤‘: ê° ì—ì´ì „íŠ¸ëŠ” 1ê°œì˜ ì„¸ì…˜ë§Œ ì²˜ë¦¬"
    - "ê°œë³„ íŒŒì¼ ì¶œë ¥: ê° ì„¸ì…˜ì€ ë…ë¦½ëœ ì™„ì„±ëœ êµì•ˆ íŒŒì¼ë¡œ ì €ì¥"
    - "7ì„¹ì…˜ êµ¬ì¡° í•„ìˆ˜: ëª¨ë“  ì„¸ì…˜ì€ A0ì´ ì •ì˜í•œ 7ì„¹ì…˜ êµ¬ì¡°ë¥¼ ì™„ì „íˆ ì¤€ìˆ˜"
    - "ë¶„ëŸ‰ ë¬´ì œí•œ: êµìœ¡ì  ì™„ê²°ì„±ì´ ìµœìš°ì„ , ê¸€ì ìˆ˜ ì œí•œ ì—†ìŒ"
    - "ì„œìˆ í˜• ê°•ì œ: ê°œì¡°ì‹ ìš”ì•½ ê¸ˆì§€, ê¸´ ì¤„ê¸€ ì„œìˆ í˜• í•„ìˆ˜"
    - "ë¸Œë¦¿ì§€ ë…¸íŠ¸: ì„¸ì…˜ ê°„ ì—°ê²°ì„±ì„ ìœ„í•œ ì „í™˜ ë©˜íŠ¸ í¬í•¨"

  # â”€â”€ 3-Source Mandatory ë°ì´í„° ìˆ˜ì§‘ ì •ì±… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  data_collection_policy:
    mode: "3_source_mandatory"
    collection_unit: "Day"  # Day ë‹¨ìœ„ ìˆ˜ì§‘ â†’ ì„¸ì…˜ë³„ ë¶„ë°°
    description: "3ê°œ ì†ŒìŠ¤ë¥¼ ë…ë¦½ì ìœ¼ë¡œ ìˆ˜ì§‘í•˜ê³  ì„¸ì…˜ë³„ íŒ©íŠ¸ íŒ¨í‚·ìœ¼ë¡œ í†µí•©"
    
    sources:
      source_a_local:
        name: "ë¡œì»¬ ì°¸ê³ ìë£Œ"
        required: false  # ë¡œì»¬ì— ìë£Œê°€ ì—†ì„ ìˆ˜ë„ ìˆìŒ
        method: "ğŸ“š ì°¸ê³ ìë£Œ ë§¤í•‘ ê¸°ë°˜ ì„¸ì…˜ íƒ€ê²Ÿ ì¶”ì¶œ"
        input: "_reference_mapping.json + ì°¸ê³ ìë£Œ/ í´ë”"
        
      source_b_notebooklm:
        name: "NotebookLM"
        required: "conditional"  # URL ì œê³µ ì‹œ í•„ìˆ˜
        method: "Dayë³„ ì‹¬í™” ì§ˆì˜ (5íšŒ ìˆ˜ì§‘ â†’ ì„¸ì…˜ë³„ ë¶„ë°°)"
        note: "íŠ¸ë Œë“œ ë¦¬í¬íŠ¸ìš©ì´ ì•„ë‹Œ ê°•ì˜ ì½˜í…ì¸  ì†ŒìŠ¤ë¡œ í™œìš©"
        
      source_c_deep_research:
        name: "ë”¥ë¦¬ì„œì¹˜"
        required: true  # í•­ìƒ í•„ìˆ˜
        method: "ì›¹ ì „ì²´ ëŒ€ìƒ ì‹¬ì¸µ íƒìƒ‰"
        
    fact_packet_structure:
      per_session:
        - "local_excerpt: ë¡œì»¬ ì°¸ê³ ìë£Œ ë°œì·Œ (ìˆëŠ” ê²½ìš°)"
        - "notebooklm: NotebookLM ì§ˆì˜ ê²°ê³¼"
        - "deep_research: ë”¥ë¦¬ì„œì¹˜ ê²°ê³¼"
        - "source_status: {local: found|not_found, notebooklm: collected|skipped, deep_research: collected}"
        - "synthesis: 3-Source êµì°¨ ê²€ì¦ í†µí•© ìš”ì•½"

logging:
  enabled: true
  protocol: ".agent/logging-protocol.md"
  model_config: ".opencode/oh-my-opencode.jsonc"
  path: ".agent/logs/{YYYY-MM-DD}_02_Material_Writing.jsonl"
  format: "jsonl"
  # â”€â”€ ë¡œê¹… ê°•ì œ ì •ì±… (MANDATORY) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # A0 ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°ëŠ” ê° step ì‹¤í–‰ ì‹œ ë°˜ë“œì‹œ ì•„ë˜ í›…ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
  # {step_id}, {agent}, {category}, {action}ì€ í•´ë‹¹ step ì •ì˜ì—ì„œ ìë™ ì¹˜í™˜ë©ë‹ˆë‹¤.
  step_hooks:
    init: "RUN_ID=$(python3 .agent/scripts/agent_logger.py init --workflow 02_Material_Writing)"
    pre_step: |
      python3 .agent/scripts/agent_logger.py start \
        --workflow 02_Material_Writing --run-id $RUN_ID \
        --step-id {step_id} --agent {agent} --category {category} \
        --action {action}
    post_step: |
      python3 .agent/scripts/agent_logger.py end \
        --workflow 02_Material_Writing --run-id $RUN_ID \
        --step-id {step_id} --output-bytes {output_bytes}
    on_fail: |
      python3 .agent/scripts/agent_logger.py fail \
        --workflow 02_Material_Writing --run-id $RUN_ID \
        --step-id {step_id} --agent {agent} --category {category} \
        --action {action} --error "{error_message}"
    on_decision: |
      python3 .agent/scripts/agent_logger.py decision \
        --workflow 02_Material_Writing --run-id $RUN_ID \
        --step-id {step_id} --agent {agent} --category {category} \
        --action {action} --decision {decision}
  enforcement: |
    âš ï¸ ë¡œê¹…ì€ step ì‹¤í–‰ì˜ ì „ì œì¡°ê±´ì…ë‹ˆë‹¤. ìƒëµ ì‹œ QAì—ì„œ ë°˜ë ¤ë©ë‹ˆë‹¤.
    - init: íŒŒì´í”„ë¼ì¸ ìµœì´ˆ ì‹¤í–‰ ì‹œ 1íšŒ (RUN_ID ìƒì„±)
    - pre_step: ê° step ì‹¤í–‰ ì§ì „ (START ê¸°ë¡)
    - post_step: ê° step ì‹¤í–‰ ì§í›„ (END ê¸°ë¡)
    - on_fail/on_decision: í•´ë‹¹ ì´ë²¤íŠ¸ ë°œìƒ ì‹œ
    ëª¨ë“  stepì€ ë°˜ë“œì‹œ [pre_step â†’ step ì‹¤í–‰ â†’ post_step] 3ë‹¨ê³„ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.

steps:
  # Phase 1: 3-Source Mandatory ì†ŒìŠ¤ ìˆ˜ì§‘ ë° êµ¬ì¡°í™”
  - id: step_1_source_mining
    agent: "02_writer/A1_Source_Miner"
    action: "extract_facts_3source"
    input: 
      - "ê°•ì˜êµ¬ì„±ì•ˆ (01_Planning/ê°•ì˜êµ¬ì„±ì•ˆ.md)"
      - "Reference Materials (ì°¸ê³ ìë£Œ/ â€” ìˆëŠ” ê²½ìš°)"
      - "NotebookLM URL (ì œê³µ ì‹œ í•„ìˆ˜ ì‹¤í–‰)"
      - "Deep Research (í•­ìƒ í•„ìˆ˜ ì‹¤í–‰)"
      - "Output Language: Korean"
    output: "3-Source Fact Packet (ì„¸ì…˜ë³„ í†µí•© íŒ©íŠ¸)"
    notes: |
      ğŸ”„ 3-Source Mandatory: 3ê°œ ì†ŒìŠ¤ë¥¼ ë…ë¦½ ìˆ˜ì§‘ í›„ ì„¸ì…˜ë³„ í†µí•©
        - Source A (ë¡œì»¬): _reference_mapping.json ê¸°ë°˜ íƒ€ê²Ÿ ì¶”ì¶œ (ì—†ì„ ìˆ˜ ìˆìŒ)
        - Source B (NotebookLM): URL ì œê³µ ì‹œ Dayë³„ ì‹¬í™” ì§ˆì˜ í•„ìˆ˜
        - Source C (ë”¥ë¦¬ì„œì¹˜): í•­ìƒ í•„ìˆ˜ ì‹¤í–‰
      âš ï¸ ì¶©ë¶„ì„± íŒë‹¨ ì—†ìŒ: ê° ì†ŒìŠ¤ëŠ” ë…ë¦½ì ìœ¼ë¡œ ìˆ˜ì§‘, ìƒí˜¸ ëŒ€ì²´í•˜ì§€ ì•ŠìŒ
      ğŸ“Š External Tool Logging: A1_Source_Miner must log all external tool calls
      (notebooklm, deep-research, context7, firecrawl, pdf-official) to
      .agent/logs/{DATE}_02_Material_Writing.jsonl using EXTERNAL_TOOL_START/END events.

  - id: step_2_traceability_setup
    agent: "02_writer/A2_Traceability_Curator"
    action: "setup_tracking"
    depends_on: "step_1_source_mining"
    input: 
      - "3-Source Fact Packet"
      - "Source Materials"
      - "Output Language: Korean"
    output: "Traceability Packet (Initial)"

  - id: step_3_skeleton_design
    agent: "02_writer/A3_Curriculum_Architect"
    action: "create_skeleton"
    depends_on: "step_2_traceability_setup"
    input: 
      - "3-Source Fact Packet"
      - "ê°•ì˜êµ¬ì„±ì•ˆ (ì„¸ì…˜ ëª©ë¡)"
      - "Output Language: Korean"
    output: "Skeleton Packet (per session)"

  # Phase 2: ì„¸ì…˜ë³„ ê°œë³„ ì§‘í•„
  - id: step_4_session_writing
    agent: "02_writer/A4B_Session_Writer"
    action: "write_session_material"
    depends_on: "step_3_skeleton_design"
    parallel_mode: "foreach_session"  # ê° ì„¸ì…˜ë³„ ë…ë¦½ ì‹¤í–‰
    batch_size: 3  # í•œ ë²ˆì— ì²˜ë¦¬í•  ì„¸ì…˜ ìˆ˜ (API rate limit ê³ ë ¤)
    input: 
      - "Session Spec (from ê°•ì˜êµ¬ì„±ì•ˆ) â€” ğŸ“š ì°¸ê³ ìë£Œ ë§¤í•‘ ì„¹ì…˜ í¬í•¨"
      - "Skeleton Packet"
      - "3-Source Fact Packet (ì„¸ì…˜ë³„ í†µí•© íŒ©íŠ¸)"
      - "Traceability Packet"
      - "Output Language: Korean"
    output: "Session Material Files (02_Material/sessions/ì„¸ì…˜-*.md)"
    notes: |
      ğŸ¯ í•µì‹¬: ê° ì„¸ì…˜(60~90ë¶„)ì„ ê°œë³„ íŒŒì¼ë¡œ ì§‘í•„
      ğŸ“ í•„ìˆ˜ êµ¬ì¡°: A0ì´ ì •ì˜í•œ 7ì„¹ì…˜ êµ¬ì¡°ë¥¼ ì™„ì „íˆ ì¤€ìˆ˜
        - Â§1 ê°œìš” (ë„ì…ë¶€ + ê°•ì‚¬ ëŒ€ë³¸ ğŸ—£ï¸)
        - Â§2 í•µì‹¬ ê°œë… (ì„œìˆ í˜• + ë¹„ìœ /ìŠ¤í† ë¦¬í…”ë§)
        - Â§3 ìƒì„¸ ë‚´ìš© (ì½”ë“œ ì˜ˆì œ + ì‹œê°í™” + Mermaid)
        - Â§4 ì‹¤ìŠµ ê°€ì´ë“œ (ë‹¨ê³„ë³„ í‘œ + ğŸ™ï¸ ì‹¤ìŠµ ëŒ€ë³¸ + íŠ¸ëŸ¬ë¸”ìŠˆíŒ… FAQ)
        - Â§5 ì½”ë“œ ëª¨ìŒ (ì „ì²´ ì‹¤í–‰ ê°€ëŠ¥ ì½”ë“œ)
        - Â§6 ìš”ì•½ (ë§ˆë¬´ë¦¬ + ë¸Œë¦¿ì§€ ë…¸íŠ¸)
        - Â§7 ì°¸ê³ ìë£Œ (ì¶œì²˜ + ê°•ì‚¬ ë…¸íŠ¸)
      ğŸ“ ì¶œë ¥ ê·œì¹™:
        - ë¶„ëŸ‰ ì œí•œ ì—†ìŒ. êµìœ¡ì  ì™„ê²°ì„±ì´ ìµœìš°ì„ 
        - ì„œìˆ í˜• ê¸´ ì¤„ê¸€ (ê°œì¡°ì‹ ìš”ì•½ ê¸ˆì§€)
        - ì¹œê·¼í•œ êµ¬ì–´ì²´ (~í•´ìš”, ~ì…ë‹ˆë‹¤)
        - ğŸ—£ï¸ ê°•ì‚¬ ëŒ€ë³¸ + ğŸ™ï¸ ì‹¤ìŠµ ê°€ì´ë“œ í¬í•¨
        - ë¹„ìœ  ë° ìŠ¤í† ë¦¬í…”ë§ ('AI ì‹œëŒ€ì˜ ì„œì‚¬' í†¤)
        - í‘œ í—ˆìš©: ì‹¤ìŠµ ê°€ì´ë“œ í‘œ, ë¹„êµ í‘œ, ìš”ì•½ í‘œ ì ê·¹ í™œìš©
      ğŸ“š ì°¸ê³ ìë£Œ í™œìš© ê·œì¹™:
        - ì„¸ì…˜ ëª…ì„¸ì„œì˜ ğŸ“š ì°¸ê³ ìë£Œ ë§¤í•‘ ì„¹ì…˜ì„ ë°˜ë“œì‹œ í™•ì¸
        - 3-Source íŒ©íŠ¸ íŒ¨í‚·ì˜ local_excerpt, notebooklm, deep_research ëª¨ë‘ ë°˜ì˜
        - 3ê°œ ì†ŒìŠ¤ì— ì—†ëŠ” ë‚´ìš©ë§Œ ìì²´ ìƒì„± (ì¶œì²˜ ëª…ì‹œ)
        - ğŸ’¡ ê°•ì‚¬ ë…¸íŠ¸ì— ì°¸ê³ ìë£Œ ì¶œì²˜ í‘œê¸°
      ğŸ”„ ê¸°ì¡´ ì„¸ì…˜ íŒŒì¼ì´ ìˆìœ¼ë©´ ì…ë ¥ìœ¼ë¡œ í™œìš©í•˜ì—¬ 7ì„¹ì…˜ êµ¬ì¡°ë¡œ í™•ì¥
      ğŸ“ ì‚°ì¶œë¬¼: 02_Material/sessions/ì„¸ì…˜-{ë²ˆí˜¸:03d}-{ì œëª©}_v1.0.md
      âš ï¸ ê° ì„¸ì…˜ì€ ë…ë¦½ì ìœ¼ë¡œ ì™„ê²°ì„±ì„ ê°€ì ¸ì•¼ í•¨ (ì¤‘ê°„ì— ëŠê¸°ì§€ ì•ŠìŒ)

  # Phase 3: ì‹œê°í™” ë° í‘œ ì„¤ê³„ (ë³‘ë ¬)
  - id: step_5_code_validation
    agent: "02_writer/A5_Code_Validator"
    action: "verify_code"
    depends_on: "step_4_session_writing"
    parallel_group: "phase3_enhancement"
    input: 
      - "Session Material Files"
      - "Output Language: Korean"
    output: "Verified Code Blocks & Tech Report (02_Material/packets/code_validation/)"

  - id: step_6_visualization_design
    agent: "02_writer/A6_Visualization_Designer"
    action: "design_diagrams"
    depends_on: "step_4_session_writing"
    parallel_group: "phase3_enhancement"
    input: 
      - "Session Material Files"
      - "3-Source Fact Packet"
      - "Output Language: Korean"
    output: "Visualization Packet (Mermaid Diagrams)"

  - id: step_7_chart_specification
    agent: "02_writer/A11_Chart_Specifier"
    action: "design_tables"
    depends_on: "step_4_session_writing"
    parallel_group: "phase3_enhancement"
    input: 
      - "Session Material Files"
      - "chunk_type per session"
      - "Output Language: Korean"
    output: "Table & Chart Specifications (02_Material/visual_specs/)"
    notes: |
      ğŸ“Š í‘œ ì„¤ê³„: ë¹„êµ í‘œ, ìš”ì•½ í‘œ, ë‹¨ê³„ë³„ í‘œ
      ğŸ“ˆ ë‹¤ì´ì–´ê·¸ë¨: Mermaid flowchart, sequenceDiagram, classDiagram
      ğŸ¯ ì²­í¬ íƒ€ì…ë³„ ìµœì í™”: narrative/code/diagram/labë³„ ì ì ˆí•œ ì‹œê°í™”

  - id: step_8_learner_experience
    agent: "02_writer/A7_Learner_Experience_Designer"
    action: "design_labs"
    depends_on: "step_4_session_writing"
    parallel_group: "phase3_enhancement"
    input: 
      - "Session Material Files"
      - "Learner Persona"
      - "Output Language: Korean"
    output: "Lab Packet & Example Sets"

  - id: step_9_instructor_support
    agent: "02_writer/A9_Instructor_Support_Designer"
    action: "create_guide"
    depends_on: "step_4_session_writing"
    parallel_group: "phase3_enhancement"
    input: 
      - "Session Material Files"
      - "Output Language: Korean"
    output: "Instructor Support Packet"

  - id: step_10_differentiation
    agent: "02_writer/A10_Differentiation_Strategist"
    action: "enhance_content"
    depends_on: "step_4_session_writing"
    parallel_group: "phase3_enhancement"
    input: 
      - "Session Material Files"
      - "Output Language: Korean"
    output: "Differentiation Strategy (USP) per session"

  # Phase 4: ë³´ì¡° íŒ¨í‚· í†µí•© (ì„¸ì…˜ë³„)
  - id: step_11_enrich_sessions
    agent: "02_writer/A4C_Material_Aggregator"
    action: "enrich_sessions_with_packets"
    depends_on:
      - "step_5_code_validation"
      - "step_6_visualization_design"
      - "step_7_chart_specification"
      - "step_8_learner_experience"
      - "step_9_instructor_support"
      - "step_10_differentiation"
    input: 
      - "Session Material Files (7ì„¹ì…˜ êµ¬ì¡°)"
      - "Verified Code Blocks & Tech Report"
      - "Visualization Packet"
      - "Table & Chart Specifications"
      - "Lab Packet & Example Sets"
      - "Instructor Support Packet"
      - "Differentiation Strategy"
      - "Output Language: Korean"
    output: "Enriched Session Materials (ë³´ì¡° íŒ¨í‚· í†µí•© ì™„ë£Œ)"
    notes: |
      ğŸ¯ í•µì‹¬: Phase 3ì—ì„œ ìƒì„±ëœ 6ê°œ ë³´ì¡° íŒ¨í‚·ì„ ì„¸ì…˜ ë³¸ë¬¸ì— ì¸ë¼ì¸ í†µí•©
      ğŸ“¦ í†µí•© ëŒ€ìƒ ë³´ì¡° íŒ¨í‚· 6ê°œ:
        - A5: ê²€ì¦ëœ ì½”ë“œ ë¸”ë¡ â†’ â‘¢ ì½”ë“œ ì˜ˆì œ ë° ì‹¤ìŠµ ì„¹ì…˜ì— ì‚½ì…
        - A6: Mermaid ë‹¤ì´ì–´ê·¸ë¨ â†’ â‘£ ì‹œê°í™” ìë£Œ ì„¹ì…˜ì— ì‚½ì…
        - A7: ì‹¤ìŠµ ì„¤ê³„ â†’ â‘¤ ì‹¤ìŠµ ê°€ì´ë“œ ì„¹ì…˜ì— ì‚½ì…
        - A9: ê°•ì‚¬ ì§€ì› ìë£Œ â†’ â‘¦ ê°•ì‚¬ ë…¸íŠ¸ ì„¹ì…˜ì— ì‚½ì…
        - A10: ì°¨ë³„í™” ì „ëµ â†’ â‘¡ í•µì‹¬ ê°œë… ì„¤ëª…ì— USP ë°˜ì˜
        - A11: í‘œ/ì°¨íŠ¸ ëª…ì„¸ â†’ â‘£ ì‹œê°í™” ìë£Œ ì„¹ì…˜ì— ì‚½ì…
      âš ï¸ ì‚½ì… í›„ 7ì„¹ì…˜ êµ¬ì¡°ê°€ ìœ ì§€ë˜ëŠ”ì§€ ê²€ì¦ í•„ìˆ˜
      ğŸ“ ì‚°ì¶œë¬¼: 02_Material/sessions/ì„¸ì…˜-{ë²ˆí˜¸:03d}-{ì œëª©}_v1.0.md (ë®ì–´ì“°ê¸°)

  # Phase 4.5: AM/PM ë¶„í•  íŒŒì¼ ìƒì„±
  - id: step_12_ampm_split
    agent: "02_writer/A4C_Material_Aggregator"
    action: "generate_ampm_files"
    depends_on: "step_11_enrich_sessions"
    input:
      - "Enriched Session Materials"
      - "Day-Session ê²½ê³„í‘œ"
      - "Output Language: Korean"
    output: "AM/PM Split Files (02_Material/Day{1-5}_{AM|PM}_{ì£¼ì œìš”ì•½}.md)"
    notes: |
      ğŸ¯ í•µì‹¬: Day-Session ê²½ê³„í‘œ ê¸°ë°˜ìœ¼ë¡œ AM/PM ë¶„í•  íŒŒì¼ ìƒì„±
      ğŸ“ ê° AM/PM íŒŒì¼ì€ í•´ë‹¹ ì„¸ì…˜ë“¤ì„ ìˆœì„œëŒ€ë¡œ ì—°ê²°í•˜ê³  Day í—¤ë”/ëª©ì°¨ í¬í•¨
      ğŸ“ ì‚°ì¶œë¬¼: 02_Material/Day{N}_{AM|PM}_{ì£¼ì œìš”ì•½}.md

  # Phase 5: ì·¨í•© ë° í†µí•©
  - id: step_13_aggregation
    agent: "02_writer/A4C_Material_Aggregator"
    action: "aggregate_sessions"
    depends_on: "step_12_ampm_split"
    input: 
      - "All Enriched Session Materials"
      - "AM/PM Split Files"
      - "Output Language: Korean"
    output: "Aggregated Material Draft"
    notes: |
      ğŸ¯ í•µì‹¬: ë³´ì¡° íŒ¨í‚· í†µí•© ì™„ë£Œëœ ì„¸ì…˜ íŒŒì¼ë“¤ì„ ìµœì¢… ì·¨í•©
      ğŸ”— ì—°ê²°ì„± ê²€ì¦: ì„¸ì…˜ ê°„ ì—°ê²° í™•ì¸
      ğŸ“ ë¸Œë¦¿ì§€ ë…¸íŠ¸: ì„¸ì…˜ ê°„ ì „í™˜ ë©˜íŠ¸ ì‚½ì…
      ğŸ“‹ ìµœì¢… êµ¬ì¡°:
        - í—¤ë” ë° ë©”íƒ€ë°ì´í„°
        - ëª©ì°¨ ë° ë„¤ë¹„ê²Œì´ì…˜
        - ê°œë³„ ì„¸ì…˜ ë‚´ìš© í†µí•© (7ì„¹ì…˜ êµ¬ì¡° ìœ ì§€)
        - ë¶€ë¡ (ìš”ì•½, ì°¸ê³ ìë£Œ, ë¡œë“œë§µ)
      ğŸ“ ì‚°ì¶œë¬¼: 02_Material/ê°•ì˜êµì•ˆ_v1.0.md

  # Phase 6: ìµœì¢… QA
  - id: step_14_final_qa
    agent: "02_writer/A8_QA_Editor"
    action: "quality_assurance_v2"
    depends_on: "step_13_aggregation"
    input: 
      - "Aggregated Material (v2.1)"
      - "3-Source Fact Packet"
      - "Traceability Packet"
      - "Output Language: Korean"
    output: "QA Report & Final Material"
    qa_criteria:
      - "5ëŒ€ ì›ì¹™: ì™„ì „ì„±, ëª…í™•ì„±, ì¬í˜„ì„±, ì¶”ì ì„±, ì›ë³¸ìœ ì§€"
      - "ì„¸ì…˜ë³„ ë…ë¦½ì„± + ì „ì²´ ì¼ê´€ì„±"
      - "ë¸Œë¦¿ì§€ ë…¸íŠ¸ ì ì ˆì„±"
      - "ìš©ì–´ ë° ë¹„ìœ  ì¼ê´€ì„±"
      - "ë‚œì´ë„ ê³¡ì„  ë¶€ë“œëŸ¬ì›€"
      - "ì‹œê°í™” ì ì ˆì„± (í‘œ/ë‹¤ì´ì–´ê·¸ë¨)"
      - "ì°¸ê³ ìë£Œ í™œìš©ë„: ğŸ“š ì°¸ê³ ìë£Œ ë§¤í•‘ ëŒ€ë¹„ ì‹¤ì œ ë°˜ì˜ë¥  70% ì´ìƒ"
      - "3-Source êµì°¨ ê²€ì¦: íŒ©íŠ¸ íŒ¨í‚·ì˜ 3ê°œ ì†ŒìŠ¤ê°€ êµì•ˆì— ê· í˜• ìˆê²Œ ë°˜ì˜"
      - "7ì„¹ì…˜ êµ¬ì¡° ì¤€ìˆ˜: ëª¨ë“  ì„¸ì…˜ì´ 7ì„¹ì…˜ êµ¬ì¡°ë¥¼ ì™„ì „íˆ ë”°ë¥´ëŠ”ì§€ ê²€ì¦"
      - "ë³´ì¡° íŒ¨í‚· í†µí•© ê²€ì¦: 6ê°œ ë³´ì¡° íŒ¨í‚·ì´ ì„¸ì…˜ ë³¸ë¬¸ì— ì¸ë¼ì¸ ë°˜ì˜ë˜ì—ˆëŠ”ì§€ í™•ì¸"
      - "AM/PM ë¶„í•  ì •í•©ì„±: Day-Session ê²½ê³„í‘œ ê¸°ë°˜ ë¶„í• ì´ ì •í™•í•œì§€ ê²€ì¦"
    decision:
      approved: "Finish"
      rejected: "Go to step_4_session_writing"

# â”€â”€ ëª¨ë¸ ë¼ìš°íŒ… ì°¸ì¡° (ì •ë³¸: .agent/agents/02_writer/config.json) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ì•„ë˜ëŠ” ì°¸ì¡°ìš©ì…ë‹ˆë‹¤. ì‹¤ì œ ë¼ìš°íŒ…ì€ config.jsonì„ ë”°ë¦…ë‹ˆë‹¤.
model_routing:
  # ì„¸ì…˜ë³„ ì§‘í•„: micro-writing ì¹´í…Œê³ ë¦¬ (ì„¸ì…˜ ë‹¨ìœ„ ì„œìˆ í˜• ì§‘í•„)
  A4B_Session_Writer:
    category: "micro-writing"
    note: "7ì„¹ì…˜ êµì•ˆ ì§‘í•„ â€” ì„¸ì…˜ ë‹¨ìœ„ ì„œìˆ í˜• ì§‘í•„"
  
  # ì·¨í•© ë° í†µí•©: material-aggregation ì¹´í…Œê³ ë¦¬ (ë³´ì¡° íŒ¨í‚· í†µí•© + AM/PM ë¶„í•  + ìµœì¢… ì·¨í•©)
  A4C_Material_Aggregator:
    category: "material-aggregation"
    note: "ë³´ì¡° íŒ¨í‚· í†µí•©, AM/PM ë¶„í• , ìµœì¢… ì·¨í•© - opencode/glm-5"
  
  # í‘œ ë° ì‹œê°í™”: visual-engineering ì¹´í…Œê³ ë¦¬
  A11_Chart_Specifier:
    category: "visual-engineering"
    note: "í‘œ ë° Mermaid ë‹¤ì´ì–´ê·¸ë¨ ì„¤ê³„"
  
  # ê¸°ì¡´ ì—ì´ì „íŠ¸ëŠ” ê¸°ë³¸ ì¹´í…Œê³ ë¦¬ ìœ ì§€
  A6_Visualization_Designer:
    category: "visual-engineering"
    note: "ì‹œê°í™” ì„¤ê³„ (ê¸°ì¡´ ì„¤ì • ìœ ì§€)"
  
  A8_QA_Editor:
    category: "ultrabrain"
    note: "ìµœì¢… QA (ê¸°ì¡´ ì„¤ì • ìœ ì§€)"

  A9_Instructor_Support_Designer:
    category: "instructor-support-codex"
    note: "ê°•ì‚¬ ì§€ì› íŒ¨í‚· ìƒì„± - openai/gpt-5.3-codex"
  
  # ì¶œì²˜ ì¶”ì : quick ì¹´í…Œê³ ë¦¬
  A2_Traceability_Curator:
    category: "quick"
    note: "ì¶œì²˜ ì¶”ì  êµ¬ì¶• â€” ê¸°ê³„ì  ë§¤í•‘"
  
  # ì½”ë“œ ê²€ì¦: quick ì¹´í…Œê³ ë¦¬
  A5_Code_Validator:
    category: "quick"
    note: "ì½”ë“œ ì‹¤í–‰ ê²€ì¦ â€” ì •í™•ì„±ë§Œ í•„ìš”"
  
  # ì°¨ë³„í™” ì „ëµ: artistry ì¹´í…Œê³ ë¦¬
  A10_Differentiation_Strategist:
    category: "artistry"
    note: "ì°¨ë³„í™” ê°•í™” â€” ì°½ì˜ì  ì „ëµ"

# â”€â”€ ì—…ìŠ¤íŠ¸ë¦¼/ë‹¤ìš´ìŠ¤íŠ¸ë¦¼ ì—°ë™ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
upstream_integration:
  # 01_Lecture_Planning ì—°ë™
  lecture_planning:
    required_inputs:
      - "01_Planning/ê°•ì˜êµ¬ì„±ì•ˆ.md"
    optional_inputs:
      - "01_Planning/Trend_Report.md"
      - "ì°¸ê³ ìë£Œ/ (ë¡œì»¬ ì°¸ê³ ìë£Œ í´ë” â€” ì—†ì„ ìˆ˜ ìˆìŒ)"
      - "NotebookLM URL (ì œê³µ ì‹œ í•„ìˆ˜ í™œìš©)"
    notes: |
      v5 ì›Œí¬í”Œë¡œìš°ëŠ” 3-Source Mandatory ì •ì±…ì„ ì ìš©.
      ê°•ì˜êµ¬ì„±ì•ˆì˜ ì„¸ì…˜ êµ¬ì¡°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì„¸ì…˜ë³„ ì§‘í•„ì„ ìˆ˜í–‰í•˜ê³ ,
      NotebookLM + ë”¥ë¦¬ì„œì¹˜ë¥¼ ë…ë¦½ ìˆ˜ì§‘í•˜ì—¬ ì„¸ì…˜ë³„ 3-Source íŒ©íŠ¸ íŒ¨í‚· ìƒì„±.
      ê° ì„¸ì…˜ íŒŒì¼ì€ ë…ë¦½ì ìœ¼ë¡œ ì²˜ë¦¬ë˜ë©°, A4Cê°€ ìµœì¢… í†µí•©.

downstream_integration:
  # 03_Visualizer ì—°ë™
  visualizer:
    input_format: "session_based"
    session_files: "02_Material/sessions/ì„¸ì…˜-*.md"
    aggregated_material: "02_Material/ê°•ì˜êµì•ˆ_v1.0.md"
    
  # 04_Prompt_Generator ì—°ë™
  prompt_generator:
    input_format: "session_based"
    notes: |
      ìŠ¬ë¼ì´ë“œ í”„ë¡¬í”„íŠ¸ ìƒì„± ì‹œ ì„¸ì…˜ë³„ë¡œ ê°œë³„ í”„ë¡¬í”„íŠ¸ íŒŒì¼ ìƒì„±.
