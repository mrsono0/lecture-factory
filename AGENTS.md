# AGENTS.md

Lecture Factory agent teamì˜ ìš´ì˜ ê·œì¹™ê³¼ ì›Œí¬í”Œë¡œìš° ì •ì˜. ìƒì„¸ ì‚¬ìš©ë²•ì€ `.claude/Lecture_Creation_Guide.md` ë˜ëŠ” `.gemini/Lecture_Creation_Guide.md` ì°¸ì¡°.

## Essential Rules
> í–‰ë™ ì›ì¹™ì€ [Karpathy Guidelines](https://github.com/forrestchang/andrej-karpathy-skills)ì—ì„œ íŒŒìƒ. ì‚¬ì†Œí•œ ì‘ì—…ì—ëŠ” íŒë‹¨ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ ì ìš©.

### 1. Think Before Coding
**ê°€ì •í•˜ì§€ ë§ ê²ƒ. í˜¼ë€ì„ ìˆ¨ê¸°ì§€ ë§ ê²ƒ. íŠ¸ë ˆì´ë“œì˜¤í”„ë¥¼ ë“œëŸ¬ë‚¼ ê²ƒ.**

êµ¬í˜„ ì „ ë°˜ë“œì‹œ:
- ê°€ì •ì„ ëª…ì‹œì ìœ¼ë¡œ ì§„ìˆ . ë¶ˆí™•ì‹¤í•˜ë©´ ì§ˆë¬¸
- ì—¬ëŸ¬ í•´ì„ì´ ê°€ëŠ¥í•˜ë©´ ì œì‹œ â€” ì¡°ìš©íˆ í•˜ë‚˜ë§Œ ì„ íƒí•˜ì§€ ë§ ê²ƒ
- ë” ë‹¨ìˆœí•œ ë°©ë²•ì´ ìˆìœ¼ë©´ ë§í•  ê²ƒ. í•„ìš”í•˜ë©´ ë°˜ë¡  ì œì‹œ
- ë¶ˆëª…í™•í•˜ë©´ ì¤‘ë‹¨. ë¬´ì—‡ì´ í˜¼ë€ìŠ¤ëŸ¬ìš´ì§€ ëª…ëª…í•˜ê³  ì§ˆë¬¸

**Context Analysis**: í´ë” ê²½ë¡œ ì œê³µ ì‹œ ë°˜ë“œì‹œ: 1) íŒŒì¼ êµ¬ì¡° ë¶„ì„ â†’ 2) í•µì‹¬ íŒŒì¼ ì½ê¸° â†’ 3) ì»¨í…ìŠ¤íŠ¸ ì´í•´ í›„ ì§„í–‰.

### 2. Simplicity First
**ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ìµœì†Œí•œì˜ ì½”ë“œ. ì¶”ì¸¡ì  êµ¬í˜„ ê¸ˆì§€.**

- ìš”ì²­ëœ ê²ƒ ì´ìƒì˜ ê¸°ëŠ¥ ê¸ˆì§€
- ë‹¨ì¼ ì‚¬ìš© ì½”ë“œì— ì¶”ìƒí™” ê¸ˆì§€
- ìš”ì²­ë˜ì§€ ì•Šì€ "ìœ ì—°ì„±"ì´ë‚˜ "ì„¤ì • ê°€ëŠ¥ì„±" ê¸ˆì§€
- ë¶ˆê°€ëŠ¥í•œ ì‹œë‚˜ë¦¬ì˜¤ì— ëŒ€í•œ ì—ëŸ¬ í•¸ë“¤ë§ ê¸ˆì§€
- 200ì¤„ë¡œ ì‘ì„±í–ˆëŠ”ë° 50ì¤„ë¡œ ê°€ëŠ¥í•˜ë©´ ë‹¤ì‹œ ì‘ì„±

ìë¬¸: "ì‹œë‹ˆì–´ ì—”ì§€ë‹ˆì–´ê°€ ì´ê²ƒì´ ê³¼í•˜ë‹¤ê³  í• ê¹Œ?" ê·¸ë ‡ë‹¤ë©´ ë‹¨ìˆœí™”.

### 3. Surgical Changes
**í•„ìš”í•œ ê²ƒë§Œ ìˆ˜ì •. ìê¸°ê°€ ë§Œë“  ë¬¸ì œë§Œ ì •ë¦¬.**

ê¸°ì¡´ ì½”ë“œ í¸ì§‘ ì‹œ:
- ì¸ì ‘ ì½”ë“œ, ì£¼ì„, í¬ë§¤íŒ…ì„ "ê°œì„ "í•˜ì§€ ë§ ê²ƒ
- ê¹¨ì§€ì§€ ì•Šì€ ê²ƒì„ ë¦¬íŒ©í† ë§í•˜ì§€ ë§ ê²ƒ
- ë‹¤ë¥´ê²Œ í•˜ê³  ì‹¶ì–´ë„ ê¸°ì¡´ ìŠ¤íƒ€ì¼ì„ ë”°ë¥¼ ê²ƒ
- ê´€ë ¨ ì—†ëŠ” ë°ë“œ ì½”ë“œë¥¼ ë°œê²¬í•˜ë©´ ì–¸ê¸‰ë§Œ â€” ì‚­ì œí•˜ì§€ ë§ ê²ƒ

ìì‹ ì˜ ë³€ê²½ìœ¼ë¡œ ì¸í•œ orphan ì²˜ë¦¬:
- ìì‹ ì˜ ë³€ê²½ìœ¼ë¡œ ì‚¬ìš©ë˜ì§€ ì•Šê²Œ ëœ import/ë³€ìˆ˜/í•¨ìˆ˜ëŠ” ì œê±°
- ê¸°ì¡´ì— ìˆë˜ ë°ë“œ ì½”ë“œëŠ” ìš”ì²­ ì‹œì—ë§Œ ì œê±°

ê²€ì¦: ë³€ê²½ëœ ëª¨ë“  ì¤„ì´ ì‚¬ìš©ì ìš”ì²­ì— ì§ì ‘ ì—°ê²°ë˜ëŠ”ê°€?

### 4. Goal-Driven Execution
**ì„±ê³µ ê¸°ì¤€ì„ ì •ì˜í•˜ê³  ê²€ì¦ë  ë•Œê¹Œì§€ ë°˜ë³µ.**

ì‘ì—…ì„ ê²€ì¦ ê°€ëŠ¥í•œ ëª©í‘œë¡œ ì „í™˜:
- "ê²€ì¦ ì¶”ê°€" â†’ "ì˜ëª»ëœ ì…ë ¥ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì‘ì„± í›„ í†µê³¼ì‹œí‚¤ê¸°"
- "ë²„ê·¸ ìˆ˜ì •" â†’ "ì¬í˜„ í…ŒìŠ¤íŠ¸ ì‘ì„± í›„ í†µê³¼ì‹œí‚¤ê¸°"
- "ë¦¬íŒ©í† ë§" â†’ "ë¦¬íŒ©í† ë§ ì „í›„ í…ŒìŠ¤íŠ¸ í†µê³¼ í™•ì¸"

ë©€í‹°ìŠ¤í… ì‘ì—…ì€ ë‹¨ê³„ë³„ ê²€ì¦ ê³„íš ìˆ˜ë¦½:
```
1. [ë‹¨ê³„] â†’ ê²€ì¦: [í™•ì¸ ë°©ë²•]
2. [ë‹¨ê³„] â†’ ê²€ì¦: [í™•ì¸ ë°©ë²•]
```

**Todo Protocol**: ì¦‰ì‹œ ìƒì„± â†’ `in_progress` í‘œì‹œ â†’ ì™„ë£Œ ì¦‰ì‹œ `completed` (batch ê¸ˆì§€).

### STOP & Replan
ìŠ¤ì½”í”„ ë³€ê²½, íŒ¨í„´ ì¶©ëŒ, 2+ ì—°ì† ì‹¤íŒ¨, ì„¤ê³„ ë¬¸ì œ ë°œê²¬ ì‹œ ì¤‘ë‹¨ â†’ ëŒ€ì•ˆ ì œì•ˆ â†’ í™•ì¸ ëŒ€ê¸°.
#### 3íšŒ ì—°ì† ì‹¤íŒ¨ í”„ë¡œí† ì½œ (Failure Recovery Protocol)
**ë°œë™ ì¡°ê±´**: ë™ì¼ ì‘ì—… 3íšŒ ì—°ì† ì‹¤íŒ¨
**ê¸ˆì§€ í–‰ìœ„**: 4íšŒ ì´ìƒ ì‹œë„, ë¬´ì‘ìœ„ ë³€ê²½(shotgun debugging), í…ŒìŠ¤íŠ¸ ì‚­ì œë¡œ "í†µê³¼" ì²˜ë¦¬
1. **STOP** - ëª¨ë“  ì‘ì—… ì¦‰ì‹œ ì¤‘ë‹¨
2. **REVERT** - ë§ˆì§€ë§‰ ì•ˆì • ìƒíƒœë¡œ ë³µì› (`git checkout` ë˜ëŠ” ìˆ˜ë™ ë¡¤ë°±)
3. **DOCUMENT** - ì‹œë„í•œ ë°©ë²•ê³¼ ì‹¤íŒ¨ ì›ì¸ì„ `lessons.md`ì— ê¸°ë¡
4. **CONSULT** - Oracle ì—ì´ì „íŠ¸ì— ì»¨í…ìŠ¤íŠ¸ ì œê³µ í›„ ë¶„ì„ ìš”ì²­
5. **ASK USER** - Oracle í•´ê²° ì‹¤íŒ¨ ì‹œ ì‚¬ìš©ì ìŠ¹ì¸ í›„ ì¬ì‹œì‘
- ì‹œë„í•œ ì ‘ê·¼ë²• 3ê°€ì§€
- ê° ì‹¤íŒ¨ì˜ êµ¬ì²´ì  ì—ëŸ¬ ë©”ì‹œì§€
- ì˜ˆìƒ ì›ì¸ê³¼ ì‹¤ì œ ì›ì¸ì˜ ì°¨ì´
- ì‹œë„í•˜ì§€ ì•Šì€ ëŒ€ì•ˆë“¤

## Workflow Overview

| # | Pipeline | Output |
|---|---|---|
| 1 | **Lecture Planning** | `01_Planning/ê°•ì˜êµ¬ì„±ì•ˆ.md`, `01_Planning/micro_sessions/` |
| 2 | **Material Writing** | `02_Material/ê°•ì˜êµì•ˆ_v1.0.md` |
| 3 | **Slide Generation** | `03_Slides/{session}/ìŠ¬ë¼ì´ë“œê¸°íšì•ˆ.md` |
| 4 | **Slide Prompt** | `04_SlidePrompt/{ì„¸ì…˜ID}_{ì„¸ì…˜ì œëª©}_í”„ë¡¬í”„íŠ¸.md` |
| 5 | **PPTX** | `05_PPTX/ìµœì¢…_í”„ë ˆì  í…Œì´ì…˜.pptx` |
| 6 | **NanoBanana** | `06_NanoPPTX/ìµœì¢…_í”„ë ˆì  í…Œì´ì…˜.pptx` |
| 7 | **Manus** | `07_ManusSlides/{ì„¸ì…˜}.pptx` |
| 8 | **Log Analysis** | `.agent/dashboard/log_analysis_{date}.md` |
| E2E | **End-to-End** | 1-4ë‹¨ê³„ ìˆœì°¨ ì‹¤í–‰ |

> Pipeline 5-7ì€ ëŒ€ì•ˆ ë°©ì‹: 05(HTML), 06(Gemini AI), 07(Manus AI)
> **ë¡œê¹… ìœ„ì¹˜**: ë¶„ì„ ë¦¬í¬íŠ¸ëŠ” `.agent/dashboard/`, ì›ì‹œ ì‹¤í–‰ ë¡œê·¸ëŠ” `.agent/logs/`ì— ì €ì¥ë¨ (`.agent/AGENTS.md` Â§ë¡œê¹… í”„ë¡œí† ì½œ ì°¸ì¡°)

### Subagent Delegation (MANDATORY)
**One Task per Subagent**: ë‹¨ì¼ ì„œë¸Œì—ì´ì „íŠ¸ì—ê²Œ ì •êµí•œ ê²°ê³¼ë¥¼ ìœ„í•´ ë”± **í•˜ë‚˜ì˜ ì„ë¬´**ë§Œ ë¶€ì—¬í•©ë‹ˆë‹¤.
- ë³µì¡í•œ ì‘ì—…ì€ ì—¬ëŸ¬ ì„œë¸Œì—ì´ì „íŠ¸ì— ë¶„í•  ìœ„ì„ (ë³‘ë ¬ ì‹¤í–‰)
- ê° ì„œë¸Œì—ì´ì „íŠ¸ëŠ” ë…ë¦½ì ì¸ contextì™€ ëª©í‘œë¥¼ ê°€ì§
- ë©”ì¸ ì—ì´ì „íŠ¸ì˜ context ì°½ ë³´ì¡´ì„ ìœ„í•´ ë³´ì¡° ì‘ì—…ì€ ë°˜ë“œì‹œ ìœ„ì„

## Execution Methods
- **Gemini CLI**: `/skill lecture-plan` ë“± ìŠ¤í‚¬ ê¸°ë°˜
- **Claude Code**: `/project:lecture-plan` ë“± ìŠ¬ë˜ì‹œ ì»¤ë§¨ë“œ
- **E2E**: Claude Codeì—ì„œ `/project:lecture-factory`ë¡œ 1-4ë‹¨ê³„ ìë™ ì‹¤í–‰

## Project Structure
```
YYYY-MM-DD_ê°•ì˜ì œëª©/
â”œâ”€â”€ 01_Planning/
â”‚   â”œâ”€â”€ ê°•ì˜êµ¬ì„±ì•ˆ.md
â”‚   â”œâ”€â”€ Trend_Report.md
â”‚   â””â”€â”€ micro_sessions/
â”‚       â”œâ”€â”€ _index.json
â”‚       â”œâ”€â”€ _flow.md
â”‚       â”œâ”€â”€ _dependency.mmd
â”‚       â”œâ”€â”€ _reference_mapping.json
â”‚       â””â”€â”€ ì„¸ì…˜-*.md
â”œâ”€â”€ 02_Material/ê°•ì˜êµì•ˆ_v1.0.md, src/, images/
â”œâ”€â”€ 03_Slides/{session}/ìŠ¬ë¼ì´ë“œê¸°íšì•ˆ.md
â”œâ”€â”€ 04_SlidePrompt/{ì„¸ì…˜ID}_{ì„¸ì…˜ì œëª©}_í”„ë¡¬í”„íŠ¸.md
â”œâ”€â”€ 05_PPTX/ | 06_NanoPPTX/ | 07_ManusSlides/
â””â”€â”€ ì°¸ê³ ìë£Œ/ì›ë³¸_ê¸°íšì•ˆ.md
```

## Model Configuration
- ìƒì„¸ ì„¤ì •: `.opencode/oh-my-opencode.jsonc`
- AGENTS.mdëŠ” ì›Œí¬í”Œë¡œìš° ê·œì¹™ë§Œ ë‹¤ë£¸

## Continuous Improvement

### lessons.md
**ìœ„ì¹˜**: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë˜ëŠ” `.agent/lessons.md`

**ê¸°ë¡**: ìˆ˜ì •ë°›ì€ ì‹¤ìˆ˜, ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ìœ„ë°˜, ë°˜ë³µ íŒ¨í„´ê³¼ êµí›ˆ

**ì‚¬ìš©**: ì„¸ì…˜ ì‹œì‘ ì‹œ ë¡œë“œ â†’ ì ìš© â†’ ì§€ì†ì  ì¶”ê°€

## Quality Assurance

### Self-Review Checklist
ì™„ë£Œ ì „ ìë¬¸: Staff Engineer ìŠ¹ì¸ ê°€ëŠ¥? ë‚¨ì€ TODO? ìµœì†Œ ë³€ê²½? ê·¼ë³¸ ì›ì¸ ìˆ˜ì •?

### Verification Before Done
ì‘ì—… ì™„ë£Œ ì¡°ê±´: ëª¨ë“  todo `[completed]` â†’ LSP diagnostics ê¹¨ë— â†’ ë¹Œë“œ/í…ŒìŠ¤íŠ¸ í†µê³¼ â†’ ì›ë˜ ìš”ì²­ ì¶©ì¡± â†’ "ë‚´ê°€ Staff Engineerë¼ë©´ ìŠ¹ì¸í• ê¹Œ?"

**ê²€ì¦ ì‹¤íŒ¨ ì‹œ**: ì¦‰ì‹œ ìˆ˜ì •, ì‚¬ì „ ë¬¸ì œëŠ” ì‚¬ìš©ì ìš”ì²­ ì‹œë§Œ ìˆ˜ì •, ë³´ê³  ì‹œ "Nê°œ ì‚¬ì „ ë¬¸ì œ ë¬´ê´€" ëª…ì‹œ.

## Quality Perspectives (3-in-1)
1. **Senior Fullstack**: ì½”ë“œ ì •í™•ì„±, ì‹¤í–‰ ê°€ëŠ¥ì„±, ê²½ë¡œ ëª…í™•ì„±
2. **Education Designer**: êµìœ¡ íë¦„ ë…¼ë¦¬ì„±, ìš©ì–´ ì„¤ëª…, ìŠ¬ë¼ì´ë“œë‹¹ í•µì‹¬ 1ê°œ
3. **Presentation Designer**: ì‹œê° ì¼ê´€ì„±, ë ˆì´ì•„ì›ƒ ê· í˜•, ê°€ë…ì„±

## Environment Variables
| Variable | Required | Purpose |
|---|---|---|
| `GEMINI_API_KEY` | Pipeline 1, 6 | Google AI API |
| `TAVILY_API_KEY` | Pipeline 1 | Tavily ê²€ìƒ‰ |
| `MANUS_API_KEY` | Pipeline 7 | Manus AI |

## Output Standards
- **Language**: Korean (ê¸°ìˆ  ìš©ì–´ ì œì™¸)
- **Format**: Markdown + code blocks
- **Code**: Python PEP 8 ì¤€ìˆ˜
- **Tone**: ìƒì„¸ ëŒ€ë³¸ ê¸°ë°˜ êµ¬ì–´ì²´ (êµ¬ì²´ì  ê·œì¹™ì€ `.opencode/oh-my-opencode.jsonc` ì°¸ì¡°)
  - ğŸ—£ï¸ ê°•ì‚¬ ëŒ€ë³¸ (Instructor Script)
  - ğŸ™ï¸ ì‹¤ìŠµ ê°€ì´ë“œ (Lab Guide)

## Tips
- **Auto Input**: 2ë‹¨ê³„+ ì…ë ¥ ìƒëµ ì‹œ ì´ì „ ê²°ê³¼ ìë™ íƒìƒ‰
- **Agent Feedback**: íŠ¹ì • ì—ì´ì „íŠ¸ì— ì§ì ‘ ì§€ì‹œ ê°€ëŠ¥
- **Pipeline ì„ íƒ**: ì½”ë“œ ì¤‘ì‹¬â†’05, AI ì´ë¯¸ì§€â†’06, í´ë¼ìš°ë“œâ†’07

## Git Branching Rule (MANDATORY)
`.agent/` ë˜ëŠ” `.claude/` íŒŒì¼ ìˆ˜ì • ì‹œ í•„ìˆ˜ ì ìš©.
**Scope**: `.agent/agents/`, `.agent/workflows/`, `.agent/scripts/`, `.agent/skills/`, `.claude/agents/`, `.claude/commands/`, `AGENTS.md`

### ì‹¤í–‰ ìˆœì„œ (ë°˜ë“œì‹œ ì´ ìˆœì„œëŒ€ë¡œ)

1. **ë¸Œëœì¹˜ ìƒì„±** â€” íŒŒì¼ ìˆ˜ì • **ì „ì—** ë°˜ë“œì‹œ `feat/<ì„¤ëª…>` ë¸Œëœì¹˜ë¥¼ ë¨¼ì € ìƒì„±
2. **íŒŒì¼ ìˆ˜ì •** â€” ë¸Œëœì¹˜ ì•ˆì—ì„œ edit/write ë„êµ¬ë¡œ íŒŒì¼ ìˆ˜ì •
3. **ì»¤ë°‹** â€” ë³€ê²½ì‚¬í•­ì„ ì»¤ë°‹
4. **ë¨¸ì§€** â€” mainìœ¼ë¡œ ì „í™˜ í›„ `--no-ff` ë¨¸ì§€
5. **í‘¸ì‹œ & ì •ë¦¬** â€” ì›ê²© í‘¸ì‹œ í›„ feat ë¸Œëœì¹˜ ì‚­ì œ
```bash
# 1. ë¸Œëœì¹˜ ìƒì„± (íŒŒì¼ ìˆ˜ì • ì „ì— ë°˜ë“œì‹œ ë¨¼ì € ì‹¤í–‰)
git checkout -b feat/update-writer-agent
# 2. íŒŒì¼ ìˆ˜ì • (edit/write ë„êµ¬ ì‚¬ìš©) & ì»¤ë°‹
git add <ìˆ˜ì •ëœ íŒŒì¼> && git commit -m "ì„¤ëª…"
# 3. main ë¨¸ì§€ & í‘¸ì‹œ & ë¸Œëœì¹˜ ì‚­ì œ
git checkout main && git merge --no-ff feat/update-writer-agent
git push && git branch -d feat/update-writer-agent
```

### âŒ ê¸ˆì§€ íŒ¨í„´
- main ë¸Œëœì¹˜ì—ì„œ ì§ì ‘ íŒŒì¼ ìˆ˜ì • í›„ ë¸Œëœì¹˜ ìƒì„± (ìˆœì„œ ìœ„ë°˜)
- Scope ê²½ë¡œì˜ íŒŒì¼ì„ ë¸Œëœì¹˜ ì—†ì´ mainì—ì„œ ì§ì ‘ ì»¤ë°‹
> ë³„ë„ ì§€ì‹œ ì—†ì–´ë„ AI ì—ì´ì „íŠ¸ëŠ” ìœ„ ê²½ë¡œ ìˆ˜ì • ì‹œ ìë™ìœ¼ë¡œ ì´ ì›Œí¬í”Œë¡œë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
