# 세션 071 — 절차적 Update, Delete 기능 구현 및 통합 테스트

| 항목 | 내용 |
|------|------|
| **세션 ID** | MS-PY101-071 |
| **소요 시간** | 25분 |
| **난이도** | ★★★ |
| **청크 타입** | lab |
| **선행 세션** | 세션-070 (필수) |
| **학습 목표** | U(수정)와 D(삭제) 기능의 핵심인 '대상 데이터 검색' 로직을 이해하고, CRUD 전체 통합 테스트를 완료할 수 있다 |
| **출처** | [A] 8 코딩.pdf §8.9 · [B] NotebookLM §3 |

---

## ① 도입 — "수정과 삭제: 진정한 관리의 완성"

🗣️ 강사 대본 (Instructor Script):

자, 이제 등록과 조회를 넘어 데이터를 수정하고 삭제하는 과정으로 넘어가겠습니다. 현실의 세계에서 한 번 기록된 정보가 영원히 변하지 않는 경우는 거의 없습니다. 고객의 전화번호가 바뀌거나, 회원을 탈퇴하는 일은 언제나 일어나기 마련이죠. 그래서 우리는 방금 만든 프로그램에 Update 기능과 Delete 기능을 추가해야 합니다. 이 두 가지 기능이 더해져야 비로소 우리는 데이터를 완벽하게 제어한다고 말할 수 있습니다. 그런데 수정이나 삭제를 하려면 가장 먼저 무엇을 해야 할까요? 바로 내가 원하는 대상을 정확하게 찾아내는 일입니다. 오늘 우리가 집중적으로 살펴볼 부분은 바로 이 대상 데이터 검색 로직입니다. AI가 새롭게 추가해 준 코드를 통해 전체 기능이 하나로 통합되어 작동하는 모습을 직접 확인하고 그 속에 숨겨진 문제의 씨앗을 발견해 보겠습니다.

---

## ② 비유 — 서랍장 숨바꼭질과 라벨 확인

🗣️ 강사 대본 (Instructor Script):

이 상황을 다시 투명 서랍장에 비유해 보겠습니다. 이제는 수백 명의 이름이 적힌 서랍장이 우리 앞에 있습니다. 누군가 다가와서 홍길동이라는 사람의 정보를 이몽룡으로 고쳐달라고 요청합니다. 직원은 어떻게 해야 할까요? 무작정 아무 서랍이나 열어서 지우개로 지울 수는 없습니다. 직원은 첫 번째 서랍부터 시작해서 붙어있는 이름 라벨을 하나하나 확인해야 합니다. 첫 번째 칸, 김철수 아니네. 두 번째 칸, 이영희 아니네. 세 번째 칸, 홍길동! 드디어 찾았습니다. 이렇게 서랍을 열어가며 내가 찾는 이름과 서랍 안의 이름이 일치하는지 비교하는 숨바꼭질이 바로 검색의 본질입니다. 

삭제를 할 때도 마찬가지입니다. 홍길동의 정보를 완전히 없애달라는 요청이 오면 역시나 1번 서랍부터 차례대로 열어보면서 홍길동을 찾아야만 비로소 정보를 꺼내어 파기할 수 있습니다. 이 과정에서 우리는 아주 중요한 사실을 하나 깨닫게 됩니다. 특정한 정보를 찾아야만 하는 상황, 즉 검색을 하는 이 숨바꼭질의 과정이 정보를 수정할 때도 필요하고 정보를 삭제할 때도 똑같이 필요하다는 점입니다. 심지어 나중에 특정 고객 한 명만 조회하는 기능을 만든다면 거기서도 똑같은 숨바꼭질을 해야 합니다. 이것은 단순히 과정이 비슷한 것을 넘어 코 편집기가 문자 그대로 똑같이 반복된다는 의미입니다. 이러한 검색 로직의 반복은 시스템이 커질수록 필연적으로 피로감을 유발하게 됩니다.

---

## ③ 개념 — 길어지는 코드와 피할 수 없는 중복의 늪

🗣️ 강사 대본 (Instructor Script):

파이썬 코드에서 대상을 검색하는 숨바꼭질은 반복문과 조건문의 결합으로 이루어집니다. 앞서 리스트의 모든 요소를 확인하기 위해 for 반복문을 사용했던 것을 기억하시나요? 대상을 찾을 때도 마찬가지로 for 반복문을 돌면서, if 조건문을 사용해 현재 확인 중인 이름이 내가 찾고자 하는 이름과 같은지 비교합니다. 이름이 같다면 그때 비로소 새로운 이름으로 덮어쓰거나 리스트에서 완전히 제거하는 함수를 호출하게 됩니다. 

문제는 이 검색을 위한 반복문과 조건문 코드가 메뉴 3번인 수정 기능 안에도 통째로 들어가고, 메뉴 4번인 삭제 기능 안에도 통째로 들어간다는 점입니다[A 8 코딩.pdf §8.9]. 기능을 하나씩 덧붙일 때마다 프로그램의 덩치는 급격하게 커집니다. AI가 만들어준 코드를 보면 기능이 작동하긴 하지만 눈에 띄게 길고 반복적인 부분들이 보이기 시작할 것입니다. 연구 문헌에서는 이렇게 하나의 무한 루프 안에 모든 기능을 다 때려 넣는 방식을 모놀리식 스크립트 구조라고 부르며, 코드가 복잡해지고 유지보수가 극도로 어려워지는 전형적인 패턴으로 지목합니다[B NotebookLM §3]. 우리는 작동에 초점을 맞추어 코드를 짰지만 그 과정에서 중복이라는 거대한 늪에 발을 들이게 된 것입니다.

```python
# 수정과 삭제 기능이 추가되어 급격히 팽창한 절차적 코드
customers = [{"name": "홍길동"}] # 테스트를 위한 초기 데이터

while True:
    menu = input("1.등록 2.조회 3.수정 4.삭제: ")
    # ... (1번 등록, 2번 조회 생략) ...
    if menu == '3':
        old_name = input("수정할 이름: ")
        # 수정 대상을 찾기 위한 검색 로직 (중복 발생)
        for c in customers:
            if c['name'] == old_name:
                new_name = input("새 이름: ")
                c['name'] = new_name
                print("수정 완료")
                break
    elif menu == '4':
        del_name = input("삭제할 이름: ")
        # 삭제 대상을 찾기 위한 검색 로직 (수정 로직과 거의 동일함)
        for c in customers:
            if c['name'] == del_name:
                customers.remove(c)
                print("삭제 완료")
                break
```

---

## ④ 실습 — 4대 기능 통합 테스트와 예외 상황 확인

🎙️ 실습 가이드 (Lab Guide):

| 단계 | 소요시간 | 활동 내용 | 달성 목표 |
|---|---|---|---|
| 1 | 5분 | 기본 데이터가 있는 상태에서 수정 기능(메뉴 3) 테스트 | 지정한 대상의 데이터가 정상적으로 변경되는지 확인 |
| 2 | 5분 | 삭제 기능(메뉴 4) 테스트 및 전체 조회(메뉴 2)로 교차 검증 | 데이터가 리스트에서 영구적으로 제거되었는지 확인 |
| 3 | 5분 | 목록에 없는 엉뚱한 이름으로 수정이나 삭제 시도해보기 | 검색 실패 시 프로그램이 오류 없이 메뉴로 돌아오는지 검증 |

🗣️ 강사 대본 (Instructor Script):

이제 드디어 네 가지 기능이 모두 모였습니다. 준비된 전체 코드를 실행하고 테스트를 진행해 보겠습니다. 이미 리스트 안에는 홍길동이라는 초기 데이터가 들어있으니 바로 수정 테스트부터 해봅시다. 메뉴 3번을 누르고 홍길동을 입력한 뒤, 여러분의 이름으로 새 이름을 적어보세요. 그리고 2번 조회를 눌러보면 이름이 완벽하게 바뀌어 있을 것입니다. 이번에는 4번을 눌러서 여러분의 이름을 삭제해 보십시오. 다시 조회를 눌렀을 때 아무것도 나오지 않는다면 삭제 기능 역시 정상입니다. 마지막으로 가장 중요한 테스트를 해보겠습니다. 다시 메뉴에서 삭제나 수정을 선택한 뒤, 방금 지워버린 이름이나 아예 목록에 없는 아무개 같은 이름을 입력해 보세요. 아무 일도 일어나지 않고 다시 첫 메뉴 화면으로 얌전하게 돌아와야 정상입니다. 데이터를 찾지 못했을 때 프로그램이 멈춰버리지 않는 것, 이것이 바로 안정성의 기본입니다.

---

## ⑤ 정리 — 작동하지만 아쉬운 코드

🗣️ 강사 대본 (Instructor Script):

훌륭합니다! 여러분은 이제 Create, Read, Update, Delete라는 4대 천왕을 하나의 프로그램 안에 모두 구현해 냈습니다. 데이터베이스 프로그래밍의 가장 기초적이고 완벽한 사이클을 경험하신 겁니다. 기능은 우리가 의도한 대로 완벽하게 작동합니다. 하지만 훌륭한 시니어 개발자는 단순히 '작동하는 코드'에 결코 만족하지 않습니다. 이 코드에는 보이지 않는 커다란 시한폭탄이 숨겨져 있습니다.

> **체크포인트**: "수정과 삭제 기능에서 공통적으로 먼저 수행해야 하는, 리스트 안의 특정 대상을 찾아내는 과정을 무엇이라고 부를까요?" — 정답은 검색(Search) 입니다!