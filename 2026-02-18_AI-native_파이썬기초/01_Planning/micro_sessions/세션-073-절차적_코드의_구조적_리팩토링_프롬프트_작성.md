# 마이크로 세션: 073-절차적 코드의 구조적 리팩토링 프롬프트 작성

## 📋 메타 정보
| 항목 | 값 |
|------|-----|
| **세션 ID** | MS-PY101-073 |
| **소요 시간** | 20분 |
| **예상 교안 분량** | 3,500자 |
| **선행 세션** | 세션-072 (필수) |
| **후행 세션** | 세션-074 |
| **핵심 키워드** | 리팩토링, 구조적 프로그래밍, 함수 분리, 관심사 분리 |
| **난이도** | medium |
| **청크 타입** | lab |

## 🎯 학습 목표
단 1개의 구체적인 학습 목표 (SMART 원칙 적용):
- 이 세션 종료 시 수강생은 절차적 코드를 기능별 함수로 분리하고 전역 변수를 제거하도록 요구하는 구조적 리팩토링 프롬프트를 작성할 수 있다.

## 🗣️ 강사 대본 구성

### 예상 분량
- **최소**: 공백 포함 1,500자
- **최대**: 공백 포함 2,000자
- **화법**: 친근한 구어체 (~해요, ~입니다)

### 서술 흐름 (반드시 포함)
1. **도입 (Hook)**: 문제점을 알았으니 고쳐야 한다는 당위성 제시 (2~3문장)
2. **비유 (Analogy)**: 구조적 리팩토링을 '원룸을 투룸/쓰리룸으로 리모델링'하는 과정에 비유 (5~8문장)
3. **개념 설명 (What)**: 외부 동작은 그대로 두되 내부 구조만 개선하는 '리팩토링(Refactoring)'의 개념과, 각 기능을 독립된 방(함수)으로 나누는 '관심사 분리' 설명 (8~12문장)
4. **실제 활용 (How)**: AI에게 "기능은 똑같이 유지하되, 각 CRUD를 개별 함수로 쪼개고 전역 변수 대신 매개변수를 써달라"고 명확히 지시하는 프롬프트 작성
5. **정리 (Checkpoint)**: 프롬프트 전송 전 필수 키워드(함수, 매개변수) 재확인 (2~3문장)

### 예시 스크립트 (필수 - 작성자 참고용)
> "코드를 갈아엎을 시간입니다. 개발자들은 이걸 '리팩토링'이라고 불러요. 겉모습(기능)은 똑같은데, 내부 뼈대만 튼튼하게 바꾸는 거죠. 절차적 코드는 거대한 '원룸'과 같아요. 침대, 주방, 화장실이 한 공간에 있어서 냄새가 섞이고 정신이 없죠. 이걸 침실, 주방, 화장실을 벽으로 쳐서 나누는 게 바로 '구조적 프로그래밍'입니다. 벽으로 나눈 이 독립된 방을 파이썬에서는 '함수'라고 불러요. 자, AI에게 인테리어 공사를 맡겨봅시다. '아까 만든 코드를 구조적으로 리팩토링해줘. 첫째, Create, Read, Update, Delete를 각각 독립된 함수로 분리해. 둘째, 전역 변수는 절대 쓰지 말고 함수들끼리 데이터를 주고받을 땐 매개변수를 사용해'라고 프롬프트를 적어주세요."

## 🎙️ 실습 가이드 (해당 시)

### 실습 목표
- 이 실습을 통해 수강생은 리팩토링의 개념을 이해하고, 구조적 프로그래밍으로 전환하기 위한 프롬프트를 실행한다.

### 단계별 지시
| 단계 | 소요 시간 | 강사 지시사항 | 예상 결과 |
|------|----------|--------------|----------|
| 1 | 5분 | "이전 대화가 이어지는 Gemini 창에서, 각 CRUD를 별도 함수로 분리하고 전역 변수 대신 매개변수로 데이터를 전달하도록 지시하세요." | 프롬프트 입력 및 전송 |
| 2 | 5분 | "새로 생성된 코드를 Antigravity IDE에 `customer_manager_v2.py`로 저장하세요." | 새 파일 저장 완료 |
| 3 | 5분 | "코드를 쓱 훑어보며 `def`라는 단어가 몇 개나 생겼는지 세어보세요." | 여러 개의 def 키워드(함수) 발견 |

### 주의사항 및 트러블슈팅
- 흔한 오류 1: AI가 이전 맥락을 잊고 완전히 새로운 스타일의 코드를 짜주는 경우 (해결법: 프롬프트에 '직전에 네가 짜준 코드를 바탕으로'라는 제약 조건 추가 안내)
- 흔한 오류 2: 파일명 지정을 잊고 원본 v1을 덮어쓰는 경우 (해결법: 나중에 비교해야 하므로 반드시 v2로 새로 만들 것을 강조)

## 💡 비유 및 스토리텔링

### 핵심 비유
- **비유**: 원룸을 투룸으로 리모델링
- **설명**: 한 덩어리였던 코드를 논리적인 구역(함수)으로 나누는 과정을 공간의 분리에 빗대어 설명. 전역 변수의 제거는 각 방에 문을 달아 냄새(데이터 오염)가 섞이지 않게 하는 것에 비유.
- **AI 시대의 서사 연결**: AI가 짠 긴 코드를 덩어리째로 읽는 것은 불가능에 가깝습니다. 코드를 '방(함수)' 단위로 쪼개 놓으면, 버그가 났을 때 그 방에만 들어가서 고치면 됩니다. AI와 협업하기 좋은 구조를 만드는 첫걸음입니다.

### 스토리텔링 포인트
- 감정적 연결: 복잡한 원룸에서 물건을 찾기 힘들었던 일상적 경험에서 출발
- 전환 멘트: "방이 여러 개 생겼네요! 그런데 각 방들이 벽으로 막혀있다면, 데이터는 어떻게 방을 옮겨 다닐까요? 그 비밀을 파헤쳐 보겠습니다."

## 🔗 의존성 및 연결성

### 필수 선행 지식
- 세션-072: 코드 리뷰: 전역 변수와 코드 중복의 한계점 발견 (왜 리팩토링을 해야 하는지 동기 부여 필요)

### 후속 연결
- 세션-074: 구조적 데이터 흐름(매개변수와 리턴)의 이해

### 브릿지 노트 예시
> "자, 겉보기엔 똑같이 작동하는 프로그램이지만 내부 코드는 완전히 달라졌습니다. 'def'라는 문지기들이 생겼거든요. 이 문지기들이 데이터를 어떻게 주고받는지, 구조적 코드의 핵심인 '매개변수'를 들여다보겠습니다."

## 📝 Gemini 프롬프트 최적화 태그
```yaml
gemini_optimized:
  chunk_type: lab
  complexity: medium
  estimated_chars: 3500
  output_style: continuous_prose
  tone: friendly_spoken_korean
  include:
    - instructor_script: true
    - lab_guide: true
    - analogy: detailed_situation
    - mermaid_diagram: false
  prerequisites:
    mandatory: [MS-PY101-072]
    recommended: []
```


## 📚 참고자료 매핑

| 참고자료 | 관련 섹션 | 활용 방법 |
|----------|----------|----------|
| 8 코딩.pdf | §8.9 절차적 프로그래밍 패턴 | 절차적 코드 구조와 한계 |
| 8 코딩.pdf | §8.10 리팩토링과 구조적 프로그래밍 | 코드 개선 패턴 및 전략 |

## ✅ 체크리스트 (작성자 자가 검증)
- [x] 단 1개의 핵심 학습 목표만 명시했는가?
- [x] 소요 시간이 15~25분 범위인가?
- [x] 강사 대본 예상 분량이 1,500~2,000자 범위인가?
- [x] chunk_type, complexity 태그를 부여했는가?
- [x] 선행/후행 세션을 명확히 연결했는가?
- [x] 비유가 'AI 시대의 서사' 톤과 일치하는가?