# 마이크로 세션: 100-DI 적용 실습 (v4 저장소 교체 테스트)

## 📋 메타 정보
| 항목 | 값 |
|------|-----|
| **세션 ID** | MS-AI-native_파이썬기초-100 |
| **소요 시간** | 20분 |
| **예상 교안 분량** | 3,000자 |
| **선행 세션** | 세션-098, 세션-099 (필수) |
| **후행 세션** | 세션-101 |
| **핵심 키워드** | 의존성 주입(DI) 실습, v4 리팩토링, 코드 교체 테스트 |
| **난이도** | medium |
| **청크 타입** | lab |

## 🎯 학습 목표
단 1개의 구체적인 학습 목표 (SMART 원칙 적용):
- 이 세션 종료 시 수강생은 CustomerManager(v4)가 외부에서 저장소 객체(FileStorage 또는 SQLiteStorage)를 주입받도록 코드를 수정하고, 단 한 줄의 변경으로 저장 방식을 교체하는 DI 패턴을 검증할 수 있다.

## 🗣️ 강사 대본 구성

### 예상 분량
- **최소**: 공백 포함 1,500자
- **최대**: 공백 포함 2,000자
- **화법**: 친근한 구어체 (~해요, ~입니다)

### 서술 흐름
1. **도입 (Hook)**: "드디어 여름용 타이어(파일)와 겨울용 타이어(DB)가 모두 준비되었습니다. 이제 자동차(CustomerManager)에 이 타이어들을 끼워 볼까요?"
2. **비유 (Analogy)**: '타이어 교체' 비유의 완성. `CustomerManager`의 `__init__` 함수에 `storage`라는 매개변수(나사 구멍)를 뚫어줍니다. 그리고 차를 출고할 때(객체를 생성할 때) `manager = CustomerManager(타이어)` 형식으로 쏙 끼워 넣는 모습을 보여줍니다.
3. **개념 설명 (What)**: 클래스 내부에서 `self.storage = FileStorage()`라고 못 박아두는 것(강한 결합)과, `def __init__(self, storage): self.storage = storage`라고 열어두는 것(의존성 주입)의 결정적 차이를 설명합니다. 
4. **실제 활용 (How)**: 기존 v3 코드를 v4 코드로 업그레이드하기 위해 AI에게 프롬프트를 입력합니다. 생성된 v4 코드를 실행하면서, 처음엔 `FileStorage()`를 주입해서 테스트하고, 그 다음엔 그 단어만 지우고 `SQLiteStorage()`로 바꿔 끼워 즉각적으로 DB 저장이 되는 마법을 보여줍니다.
5. **정리 (Checkpoint)**: 프로그램 전체 구조는 단 1%도 수정하지 않고, 괄호 안의 부품 이름 하나만 바꿨는데 시스템 전체의 저장 방식이 바뀌는 '객체지향 설계의 꽃'을 만끽하게 합니다.

### 예시 스크립트
> "여러분, 이제 진짜 객체지향의 마법을 부려볼 시간입니다. 기존 CustomerManager의 `__init__` 함수를 볼까요? 만약 여기에 `self.storage = FileStorage()`라고 적어버리면, 이 자동차는 평생 일반 타이어만 끼고 달려야 합니다. 
> 대신 이렇게 바꿔봅시다. `def __init__(self, storage): self.storage = storage`. 괄호 안에 `storage`라는 빈 구멍을 뚫어두는 거예요! 그리고 자동차를 만들 때, `manager = CustomerManager(FileStorage())` 라고 밖에서 타이어를 던져 넣어 줍니다. 이게 바로 의존성 주입(DI)입니다!
> 자, 테스트해 볼까요? 코드를 실행해 고객을 한 명 등록하세요. `customers.json` 파일에 잘 들어갔죠? 이번엔 코드를 딱 한 단어만 고치겠습니다. `manager = CustomerManager(SQLiteStorage())`. 다시 실행해 보세요. 이번엔 코드가 완벽하게 똑같이 도는데 데이터가 `.db` 파일로 들어갑니다! 기가 막히죠?"

## 🎙️ 실습 가이드 (해당 시)

### 실습 목표
- 이 실습을 통해 수강생은 DI 패턴을 직접 코드로 적용해보고 모듈 교체의 유연성을 체감한다.

### 단계별 지시
| 단계 | 소요 시간 | 강사 지시사항 | 예상 결과 |
|------|----------|--------------|----------|
| 1 | 5분 | "AI에게 'customer_manager_v3.py를 수정해서 CustomerManager가 외부에서 storage 객체를 주입(DI)받도록 만들어줘'라고 요청하세요." | `__init__`에 DI가 적용된 v4 코드 출력 |
| 2 | 5분 | "코드를 `customer_manager_v4.py`로 저장하고, 맨 아래 실행 부분에 `manager = CustomerManager(FileStorage())`를 작성해 실행합니다." | 파일(JSON)로 데이터가 저장됨 |
| 3 | 5분 | "이번엔 코드를 딱 한 줄 수정합니다. `manager = CustomerManager(SQLiteStorage())`로 바꾸고 다시 실행해 보세요." | DB(SQLite)로 데이터가 저장됨 |
| 4 | 5분 | "코드 리뷰 5대 체크포인트 중 '로직 분리(결합도)' 관점에서 이 설계가 왜 훌륭한지 스스로 평가해 봅시다." | DI 설계 패턴의 강력함에 대한 깊은 공감 |

### 주의사항 및 트러블슈팅
- 흔한 오류 1: `import file_storage, sqlite_storage` 임포트를 누락하는 경우 (해결법: 다른 파일에 있는 부품(클래스)을 가져다 쓰려면 반드시 `import`로 공장에서 부품을 배달받아야 함을 설명합니다.)

## 💡 비유 및 스토리텔링

### 핵심 비유
- **비유**: 나사 구멍 뚫어주기 (의존성 주입)
- **설명**: 부품을 본드로 붙이지 않고, 나사 구멍(`def __init__(self, storage):`)을 뚫어 외부에서 규격이 맞는 어떤 부품이든 조립할 수 있게 만드는 과정입니다.
- **AI 시대의 서사 연결**: "AI로 코드를 생성할 때도 '이 부품은 저 부품에 언제든 교체 가능하게 (DI 패턴으로) 만들어줘'라고 지시해야 합니다. AI에게 훌륭한 아키텍처 원칙을 지시하는 것이 진정한 프롬프트 엔지니어링입니다."

### 스토리텔링 포인트
- 감정적 연결: 복잡한 로직 수정 없이 단어 하나 바꿨을 뿐인데, 거대한 시스템의 동작(저장 매체)이 휙휙 바뀌는 데서 오는 '개발자의 통제감'을 강하게 느끼게 합니다.
- 전환 멘트: "여러분! 축하합니다. 절차적 프로그래밍부터 시작해서 최첨단 DI 패턴까지, 정말 숨 가쁘게 달려와 최종 버전인 v4를 완성했습니다. 이제 잠시 숨을 고르고, 이 기나긴 진화의 과정을 되돌아보러 가시죠."

## 🔗 의존성 및 연결성

### 필수 선행 지식
- 세션-098: 파일 저장 모듈 구현 (타이어 1)
- 세션-099: DB 저장 모듈 구현 (타이어 2)

### 권장 선행 지식
- 없음

### 후속 연결
- 세션-101: 전체 과정 회고 및 진화 과정 총정리

### 브릿지 노트 예시
> "이 한 줄의 마법(DI)을 직접 손으로 쳐보고 눈으로 확인하신 소감이 어떠신가요? Day 4의 낡았던 v1 코드에서 지금의 완벽한 v4 코드까지, 여러분은 프로그래밍 패러다임의 역사를 직접 체험하셨습니다. 세션 101에서는 우리가 걸어온 이 놀라운 진화의 발자취를 하나씩 짚어보며 총정리하는 시간을 가지겠습니다."

## 📝 Gemini 프롬프트 최적화 태그
```yaml
gemini_optimized:
  chunk_type: lab
  complexity: medium
  estimated_chars: 3000
  output_style: continuous_prose
  tone: friendly_spoken_korean
  include:
    - instructor_script: true
    - lab_guide: true
    - analogy: detailed_situation
    - mermaid_diagram: false
  prerequisites:
    mandatory: [98, 99]
    recommended: []
```

## ✅ 체크리스트 (작성자 자가 검증)
- [x] 단 1개의 핵심 학습 목표만 명시했는가?
- [x] 소요 시간이 15~25분 범위인가?
- [x] 강사 대본 예상 분량이 1,500~2,000자 범위인가?
- [x] chunk_type, complexity 태그를 부여했는가?
- [x] 선행/후행 세션을 명확히 연결했는가?
- [x] 비유가 'AI 시대의 서사' 톤과 일치하는가?
