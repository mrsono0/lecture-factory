# 마이크로 세션: 093-캡슐화 실습 및 v3 코드 리뷰

## 📋 메타 정보
| 항목 | 값 |
|------|-----|
| **세션 ID** | MS-AI-native_파이썬기초-093 |
| **소요 시간** | 25분 |
| **예상 교안 분량** | 4,000자 |
| **선행 세션** | 세션-092 (필수) |
| **후행 세션** | 세션-094 |
| **핵심 키워드** | 캡슐화, 접근 제어, 코드 리뷰, OOP |
| **난이도** | medium |
| **청크 타입** | lab |

## 🎯 학습 목표
단 1개의 구체적인 학습 목표 (SMART 원칙 적용):
- 이 세션 종료 시 수강생은 파이썬의 이름 장식(Name mangling, `__`)을 활용해 속성을 캡슐화하고, 5대 체크포인트에 맞춰 v3 코드를 최종 리뷰할 수 있다.

## 🗣️ 강사 대본 구성

### 예상 분량
- **최소**: 공백 포함 1,500자
- **최대**: 공백 포함 2,000자
- **화법**: 친근한 구어체 (~해요, ~입니다)

### 서술 흐름
1. **도입 (Hook)**: "데이터 검증 로직은 만들었지만, 누군가 `customer.phone = '가나다라'` 라고 코드에서 강제로 값을 바꿔버리면 어떻게 될까요?"라는 도발적인 질문으로 캡슐화의 필요성을 일깨웁니다.
2. **비유 (Analogy)**: '은행 금고' 비유. 돈(데이터)을 금고 창구 위에 그냥 올려두면 누구나 가져갈 수 있지만, 돈을 금고(캡슐화) 안에 넣고 은행원(메서드)을 통해서만 입출금하게 만들면 안전합니다.
3. **개념 설명 (What)**: 파이썬에서 변수명 앞에 언더바 2개(`__`)를 붙이면 외부에서 직접 접근할 수 없게 숨겨지는 원리를 설명합니다. 숨겨진 데이터를 수정하려면 반드시 검증 로직이 포함된 전용 메서드(예: `update_phone()`)를 사용해야 함을 강조합니다.
4. **실제 활용 (How)**: 직접 v3 코드의 Customer 속성들을 `__name`, `__phone` 등으로 변경해달라고 AI에게 요청합니다. 그리고 외부에서 억지로 접근하려고 할 때 발생하는 에러를 눈으로 확인합니다.
5. **정리 (Checkpoint)**: 캡슐화까지 적용된 최종 v3 코드를 Day 4에서 배운 '코드 리뷰 5대 체크포인트'를 활용해 검토하며 이번 챕터를 마무리합니다.

### 예시 스크립트
> "우리가 앞서 문지기를 세워서 엉터리 번호가 등록되는 걸 막았죠? 그런데 코드 중간에 개발자가 실수로 `customer.phone = '바보'` 라고 직접 값을 바꿔버리면 문지기를 그냥 패스해버립니다. 창구 위에 돈을 그냥 올려둔 셈이죠.
> 파이썬에서는 변수 이름 앞에 밑줄 두 개(`__`)를 붙이면 이 돈을 튼튼한 금고 안에 쏙 숨겨줍니다. 밖에서는 절대 직접 값을 바꿀 수 없고, 오직 은행원 역할을 하는 메서드(함수)를 통해서만 값을 바꿀 수 있어요. 은행원은 우리가 만든 '데이터 검증' 로직을 다 거친 후에만 값을 바꿔줄 겁니다. 
> 자, AI에게 'Customer 클래스의 속성들을 캡슐화해줘. 외부에서 직접 접근할 수 없게 숨기고 메서드로만 수정하게 해줘'라고 지시해 볼까요?"

## 🎙️ 실습 가이드 (해당 시)

### 실습 목표
- 이 실습을 통해 수강생은 캡슐화를 통해 데이터를 보호하는 방법을 체감하고 전체 객체지향 코드를 리뷰한다.

### 단계별 지시
| 단계 | 소요 시간 | 강사 지시사항 | 예상 결과 |
|------|----------|--------------|----------|
| 1 | 5분 | "AI에게 'Customer 클래스의 속성들을 캡슐화(`__` 사용)하고, 데이터를 수정할 때 데이터 검증 로직을 거치도록 수정해줘'라고 요청하세요." | 캡슐화 및 getter/setter 형태의 메서드가 포함된 코드 출력 |
| 2 | 5분 | "코드를 실행한 뒤, 코드 하단에 `print(customer1.__phone)` 이라고 강제로 숨겨진 데이터에 접근해 보세요." | `AttributeError` 예외가 발생하여 접근이 차단됨을 확인 |
| 3 | 10분 | "Day 4에서 배운 '코드 리뷰 5대 체크포인트'를 AI에게 던져주고, 우리가 만든 `customer_manager_v3.py`를 평가해 달라고 해보세요." | AI가 가독성, 로직 분리, 예외 처리 등을 기준으로 리뷰 리포트 출력 |
| 4 | 5분 | "리뷰 결과를 바탕으로, 절차적이었던 v2에 비해 v3가 구조적으로 얼마나 단단해졌는지 동료와 짧게 공유해 보세요." | 객체지향의 강력함(유지보수, 안전성) 공감 |

### 주의사항 및 트러블슈팅
- 흔한 오류 1: 파이썬의 `__`가 완벽한 보안은 아니라는 점에 대한 혼동 (해결법: 이름 장식(Name mangling)은 '실수 방지용'이지 '해킹 방지용' 암호화가 아니라는 점을 가볍게 언급해 줍니다.)

## 💡 비유 및 스토리텔링

### 핵심 비유
- **비유**: 은행 금고와 은행원
- **설명**: 고객 데이터(돈)는 철저히 숨겨진 금고(`__` 변수) 안에 넣고, 이 돈을 빼거나 넣으려면 반드시 정해진 절차를 따르는 은행원(검증 로직이 포함된 메서드)을 거쳐야만 합니다.
- **AI 시대의 서사 연결**: "AI가 만든 코드가 항상 완벽하진 않습니다. 그래서 우리는 캡슐화 같은 구조적 안전장치를 두고, 5대 체크포인트로 끊임없이 리뷰(검증)하며 시스템의 신뢰성을 인간이 보장해야 합니다."

### 스토리텔링 포인트
- 감정적 연결: 에러를 만났을 때 당황하지 않고, "아, 내 금고가 안전하게 작동하고 있구나!"라며 버그를 '의도된 방어'로 즐겁게 받아들이는 경험을 제공합니다.
- 전환 멘트: "이제 데이터 보관부터 검증, 보안까지 완벽한 우리만의 '조직(클래스)'을 구축했습니다. 그런데 만약... 이 고객들 중에 돈을 훨씬 많이 쓰는 'VIP 고객'이 나타나면 어떻게 관리해야 할까요?"

## 🔗 의존성 및 연결성

### 필수 선행 지식
- 세션-092: 데이터 검증 함수 추가 (검증 로직 이해)
- 세션-076: (Day 4) 테스트 시나리오 & 코드 리뷰 종합 실습 (5대 체크포인트 지식)

### 권장 선행 지식
- 없음

### 후속 연결
- 세션-094: 상속의 개념과 필요성 (VIP 추가)

### 브릿지 노트 예시
> "캡슐화까지 적용하니 코드가 정말 단단해졌죠? 웬만한 공격에는 무너지지 않는 튼튼한 성을 지은 느낌입니다. 자, 이제 이 튼튼한 성을 더 크게 확장해볼 시간입니다. 고객은 고객인데 특별 혜택을 받는 'VIP 고객'을 만들어 볼까요? 세션 94, '상속'으로 이어집니다."

## 📝 Gemini 프롬프트 최적화 태그
```yaml
gemini_optimized:
  chunk_type: lab
  complexity: medium
  estimated_chars: 4000
  output_style: continuous_prose
  tone: friendly_spoken_korean
  include:
    - instructor_script: true
    - lab_guide: true
    - analogy: detailed_situation
    - mermaid_diagram: false
  prerequisites:
    mandatory: [76, 92]
    recommended: []
```

## ✅ 체크리스트 (작성자 자가 검증)
- [x] 단 1개의 핵심 학습 목표만 명시했는가?
- [x] 소요 시간이 15~25분 범위인가?
- [x] 강사 대본 예상 분량이 1,500~2,000자 범위인가?
- [x] chunk_type, complexity 태그를 부여했는가?
- [x] 선행/후행 세션을 명확히 연결했는가?
- [x] 비유가 'AI 시대의 서사' 톤과 일치하는가?
