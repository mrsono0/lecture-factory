# D3_Submission_Manager â€” ì—ì´ì „íŠ¸ ìƒì„¸ ì„¤ê³„ ëª…ì„¸ì„œ (SDD)

> **ë¬¸ì„œ ë²„ì „**: 1.1
> **ì‘ì„±ì¼**: 2026-02-23
> **ìƒìœ„ ë¬¸ì„œ**: `Lecture_Factory_Specification.md`
> **ì†ŒìŠ¤ í”„ë¡¬í”„íŠ¸**: `.agent/agents/07_manus_slide/D3_Submission_Manager.md` (118 lines)
> **ë°”ìš´ë””ë“œ ì»¨í…ìŠ¤íŠ¸**: Pipeline 07 â€” Manus Slide Generation â€º Phase 3 (Manus AI ì œì¶œ + ë‹¤ìš´ë¡œë“œ)

---

## 1. ì—ì´ì „íŠ¸ ê°œìš”

| í•­ëª© | ê°’ |
|------|-----|
| **ì—ì´ì „íŠ¸ ID** | `D3_Submission_Manager` |
| **ì—­í• ëª…** | ì œì¶œ ê´€ë¦¬ì (Submission Manager) |
| **íŒ€** | `07_manus_slide` (6ì¸ ì—ì´ì „íŠ¸ íŒ€) |
| **LLM ì¹´í…Œê³ ë¦¬** | `quick` |
| **ê¸°ëŒ€ ëª¨ë¸ ë“±ê¸‰** | Haikuê¸‰ (ê¸°ê³„ì  ì‹¤í–‰Â·ëª¨ë‹ˆí„°ë§ ì‘ì—…) |
| **ì›Œí¬í”Œë¡œìš° ìŠ¤í…** | `step_4_manus_submission` |
| **ì‹¤í–‰ ëª¨ë¸** | Step-by-Step (ìˆœì°¨ ì‹¤í–‰) |
| **í•µì‹¬ í•œì¤„ ìš”ì•½** | D2ê°€ ì¤€ë¹„í•œ ì²­í¬/ì›ë³¸ í”„ë¡¬í”„íŠ¸ë¥¼ `manus_slide.py`ë¥¼ í†µí•´ Manus AIì— ìˆœì°¨ ì œì¶œí•˜ê³ , PPTX ë‹¤ìš´ë¡œë“œ ê²°ê³¼ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ì‹¤í–‰ ê´€ë¦¬ì. íŒŒì¼ ì—…ë¡œë“œ ëª¨ë“œ ì‹œ ê³µí†µ í—¤ë”ë¥¼ Projects/Files APIë¡œ ì‚¬ì „ ì—…ë¡œë“œí•˜ì—¬ ì¤‘ë³µ ì „ì†¡ì„ ì œê±° |

---

## 2. íŒŒì´í”„ë¼ì¸ ë‚´ ìœ„ì¹˜

```
[D0 Orchestrator] â”€step_1â†’ [D1 Prompt Validator] â”€step_2â†’ [D2 Chunk Splitter]
                                                              â”‚
                                                          step_3
                                                              â”‚
                                                              â–¼
                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                    â”‚ â˜… D3 Submission â”‚
                                                    â”‚    Manager      â”‚
                                                    â”‚  step_4_manus_  â”‚
                                                    â”‚   submission    â”‚
                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                             â”‚
                                                         step_4
                                                             â”‚
                                                             â–¼
                                              [D4 Post Processor] â”€step_5â†’ [D5 Visual QA]
                                                                              â”‚
                                                                          step_6
                                                                              â”‚
                                                                              â–¼
                                                                    [D0 ìŠ¹ì¸/ì¬ì œì¶œ/ë°˜ë ¤]
                                                                              â”‚
                                                              partial_resubmit (í•´ë‹¹ ì²­í¬ë§Œ)
                                                                              â”‚
                                                                              â–¼
                                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                    â”‚ D3 (ì¬ì œì¶œ ë£¨í”„) â”‚
                                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í•µì‹¬ ìœ„ì¹˜**: Phase 3ì˜ ìœ ì¼í•œ ì—ì´ì „íŠ¸. ì™¸ë¶€ API(Manus AI)ì™€ ì§ì ‘ í†µì‹ í•˜ëŠ” **ìœ ì¼í•œ ì‹¤í–‰ ì—ì´ì „íŠ¸**ì´ë©°, ë¹„ìš©ì´ ë°œìƒí•˜ëŠ” API í˜¸ì¶œì˜ ê²Œì´íŠ¸ì›¨ì´ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì¬ì œì¶œ ë£¨í”„(step_7 â†’ step_4)ì˜ ì¬ì§„ì…ì ì´ê¸°ë„ í•©ë‹ˆë‹¤.

---

## 3. ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„

### 3.1 ì…ë ¥ (Input)

| ì…ë ¥ í•­ëª© | ì†ŒìŠ¤ | í˜•ì‹ | í•„ìˆ˜ ì—¬ë¶€ |
|-----------|------|------|:---------:|
| Chunk Manifest | D2_Chunk_Splitter | JSON/ë§ˆí¬ë‹¤ìš´ (íŒŒì¼ë³„ ë¶„í•  ê³„íš, ì²­í¬ ìˆœì„œ) | âœ… |
| ì²­í¬ íŒŒì¼ ë˜ëŠ” ì›ë³¸ í”„ë¡¬í”„íŠ¸ íŒŒì¼ | D2 ì‚°ì¶œë¬¼ / `04_SlidePrompt/` | `.md` íŒŒì¼ (Nê°œ) | âœ… |
| `MANUS_API_KEY` | í™˜ê²½ë³€ìˆ˜ (`.claude/.env` í´ë°±) | ë¬¸ìì—´ | âœ… |
| í”„ë¡œì íŠ¸ í´ë” ê²½ë¡œ | D0_Orchestrator | ì ˆëŒ€ ê²½ë¡œ ë¬¸ìì—´ | âœ… |
| Output Language | ì›Œí¬í”Œë¡œìš° íŒŒë¼ë¯¸í„° | `Korean` ê³ ì • | âœ… |
| `project_id` + `file_ids` | D0_Orchestrator (íŒŒì¼ ì—…ë¡œë“œ ëª¨ë“œ) | ë¬¸ìì—´ + ë”•ì…”ë„ˆë¦¬ (Manus API í”„ë¡œì íŠ¸/íŒŒì¼ ID) | âš ï¸ ì—…ë¡œë“œ ëª¨ë“œ ì‹œ |
| `--no-upload` í”Œë˜ê·¸ | CLI ì˜µì…˜ | Boolean (ê¸°ë³¸ False = ì—…ë¡œë“œ ëª¨ë“œ ì‚¬ìš©) | âŒ (ì„ íƒ) |

### 3.2 ì¶œë ¥ (Output)

| ì¶œë ¥ í•­ëª© | í˜•ì‹ | ì €ì¥ ê²½ë¡œ |
|-----------|------|-----------|
| **ë‹¤ìš´ë¡œë“œëœ PPTX íŒŒì¼** | `.pptx` (Nê°œ) | `{í”„ë¡œì íŠ¸í´ë”}/07_ManusSlides/` |
| **ì œì¶œ ê²°ê³¼ ë¦¬í¬íŠ¸** | ë§ˆí¬ë‹¤ìš´ í…Œì´ë¸” | D0ì— ì§ì ‘ ì „ë‹¬ (ì¸ë©”ëª¨ë¦¬) |
| **manus_task_log.json** | JSON (ìë™ ìƒì„±) | `{í”„ë¡œì íŠ¸í´ë”}/07_ManusSlides/manus_task_log.json` |

**ì œì¶œ ê²°ê³¼ ë¦¬í¬íŠ¸ í˜•ì‹**:

```markdown
## ì œì¶œ ê²°ê³¼

| # | íŒŒì¼/ì²­í¬ | task_id | ìƒíƒœ | ì†Œìš” ì‹œê°„ | PPTX |
|---|----------|---------|:---:|:------:|:---:|
| 1 | Day1_AM_chunk_1of2 | mns_xxx | âœ… | 5ë¶„ | 22ì¥ |
| 2 | Day1_AM_chunk_2of2 | mns_yyy | âœ… | 4ë¶„ | 19ì¥ |
| 3 | Day1_PM | mns_zzz | âœ… | 8ë¶„ | 36ì¥ |

ì„±ê³µ: {N}ê°œ / ì‹¤íŒ¨: {N}ê°œ / ì´ ì†Œìš”: {N}ë¶„
ì—…ë¡œë“œ ëª¨ë“œ: {í™œì„±í™”/ë¹„í™œì„±í™”} | í”„ë¡œì íŠ¸ ID: {project_id ë˜ëŠ” N/A}
```

### 3.3 í•˜ë¥˜ ì „íŒŒ

| í•˜ë¥˜ ì—ì´ì „íŠ¸ | ì „ë‹¬ í•­ëª© | ì‚¬ìš© ëª©ì  |
|--------------|-----------|-----------|
| D4_Post_Processor | ë‹¤ìš´ë¡œë“œëœ PPTX íŒŒì¼ + Chunk Manifest | ì²­í¬ PPTX ë³‘í•©, í—¤ë”/í’‹í„° í›„ì²˜ë¦¬ |
| D0_Orchestrator | ì œì¶œ ê²°ê³¼ ë¦¬í¬íŠ¸ | ì§„í–‰ í˜„í™© ì¶”ì , ì˜ì‚¬ê²°ì • |
| D3 ìì‹  (ì¬ì œì¶œ ë£¨í”„) | ì‹¤íŒ¨í•œ ì²­í¬ ëª©ë¡ | partial_resubmit ì‹œ í•´ë‹¹ ì²­í¬ë§Œ ì¬ì œì¶œ |

---

## 4. ì²˜ë¦¬ ë¡œì§

### 4.1 ë©”ì¸ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  D3 Submission Manager                   â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ í™˜ê²½ ê²€ì¦     â”‚                                        â”‚
â”‚  â”‚ (Pre-flight)  â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚         â”‚                                                â”‚
â”‚         â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    No    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ dry-run ëª¨ë“œ? â”œâ”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ ì œì¶œ í êµ¬ì„±  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚     Yes â”‚                        â”‚                       â”‚
â”‚         â–¼                        â–¼                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ íŒŒì¼ ëª©ë¡ +   â”‚    â”‚ WHILE queue NOT empty â”‚           â”‚
â”‚  â”‚ ì œì¶œ ê³„íš ì¶œë ¥â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚ íŒŒì¼/ì²­í¬ ì œì¶œ    â”‚   â”‚           â”‚
â”‚                      â”‚ â”‚ (manus_slide.py)â”‚   â”‚           â”‚
â”‚                      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚           â”‚
â”‚                      â”‚          â”‚             â”‚           â”‚
â”‚                      â”‚          â–¼             â”‚           â”‚
â”‚                      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚           â”‚
â”‚                      â”‚ â”‚ 30ì´ˆ í´ë§ ëŒ€ê¸°   â”‚   â”‚           â”‚
â”‚                      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚           â”‚
â”‚                      â”‚          â”‚             â”‚           â”‚
â”‚                      â”‚          â–¼             â”‚           â”‚
â”‚                      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚           â”‚
â”‚                      â”‚ â”‚ ìƒíƒœ í™•ì¸        â”‚   â”‚           â”‚
â”‚                      â”‚ â”‚ completed?       â”‚   â”‚           â”‚
â”‚                      â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚           â”‚
â”‚                      â”‚  Yes â”‚    â”‚ No/Fail   â”‚           â”‚
â”‚                      â”‚      â–¼    â–¼            â”‚           â”‚
â”‚                      â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”      â”‚           â”‚
â”‚                      â”‚ â”‚PPTX â”‚ â”‚ì¬ì‹œë„/â”‚      â”‚           â”‚
â”‚                      â”‚ â”‚ë‹¤ìš´ â”‚ â”‚ê²©ë¦¬  â”‚      â”‚           â”‚
â”‚                      â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜      â”‚           â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                              â”‚                           â”‚
â”‚                              â–¼                           â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚                     â”‚ ì œì¶œ ê²°ê³¼ ë¦¬í¬íŠ¸ â”‚                  â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 í™˜ê²½ ì‚¬ì „ ê²€ì¦ (Pre-flight Check)

```pseudo
FUNCTION preflight_check():
    // 1. API í‚¤ í™•ì¸
    api_key = ENV["MANUS_API_KEY"]
    IF api_key IS NULL:
        api_key = read_file(".claude/.env")["MANUS_API_KEY"]
    IF api_key IS NULL:
        ABORT("MANUS_API_KEY not found")

    // 2. ì˜ì¡´ì„± í™•ì¸
    IF NOT pip_installed("requests"):
        ABORT("requests íŒ¨í‚¤ì§€ ë¯¸ì„¤ì¹˜")
    IF NOT pip_installed("python-pptx"):
        WARN("python-pptx ë¯¸ì„¤ì¹˜ â€” í›„ì²˜ë¦¬ ë¶ˆê°€")

    // 3. ì¶œë ¥ ë””ë ‰í† ë¦¬
    mkdir_p("{í”„ë¡œì íŠ¸í´ë”}/07_ManusSlides/")

    RETURN OK
```

### 4.3 ì œì¶œ ìˆœì„œ ê²°ì •

```pseudo
FUNCTION build_submission_queue(chunk_manifest):
    queue = []

    FOR EACH session IN chunk_manifest SORTED BY (Day, AM/PM):
        IF session.is_chunked:
            FOR EACH chunk IN session.chunks SORTED BY chunk_number:
                queue.append({
                    file: chunk.file_path,
                    session_id: session.id,
                    chunk_index: chunk.number,
                    total_chunks: session.total_chunks
                })
        ELSE:
            queue.append({
                file: session.original_file,
                session_id: session.id,
                chunk_index: null,
                total_chunks: 1
            })

    RETURN queue
```

### 4.4 ìˆœì°¨ ì œì¶œ ì‹¤í–‰

```pseudo
FUNCTION submit_sequential(queue, project_folder, project_id=None, file_ids=None):
    results = []
    
    FOR EACH item IN queue:
        // ìˆœì°¨ ì œì¶œ (ë™ì‹œ ì œì¶œ ê¸ˆì§€)
        result = execute_submission(item, project_folder, project_id, file_ids)
        results.append(result)
        
        // D0ì— ì§„í–‰ í˜„í™© ë³´ê³ 
        report_progress(item, result, len(results), len(queue))
        
        // ì™„ë£Œ í›„ ë‹¤ìŒ íŒŒì¼ ì œì¶œ (ëŒ€ê¸° ì—†ìŒ â€” í´ë§ì´ ì´ë¯¸ ëŒ€ê¸°)
    
    RETURN results

FUNCTION execute_submission(item, project_folder, project_id=None, file_ids=None):
    cmd = "python .agent/scripts/manus_slide.py {project_folder} --file {item.file}"
    
    // íŒŒì¼ ì—…ë¡œë“œ ë¹„í™œì„±í™” ì‹œ
    IF project_id IS NULL:
        cmd += " --no-upload"
    
    TRY:
        run_command(cmd)
        // manus_slide.py ë‚´ë¶€ì—ì„œ 30ì´ˆ ê°„ê²© í´ë§ ìˆ˜í–‰
        // ì—…ë¡œë“œ ëª¨ë“œ ì‹œ project_id + file_idsë¥¼ create_task()ì— ì „ë‹¬
        
        // manus_task_log.json ì—ì„œ ê²°ê³¼ í™•ì¸
        log = read_json("07_ManusSlides/manus_task_log.json")
        task_entry = log.find(item.file)
        
        SWITCH task_entry.status:
            CASE "completed":
                RETURN {status: "âœ…", task_id: task_entry.id, 
                        elapsed: task_entry.elapsed, slides: count_slides()}
            CASE "completed_no_file":
                RETURN {status: "âš ï¸", task_id: task_entry.id,
                        note: "shareable_link ê¸°ë¡, ìˆ˜ë™ ë‹¤ìš´ë¡œë“œ ì•ˆë‚´"}
            CASE "timeout":
                RETURN {status: "âŒ", task_id: task_entry.id,
                        note: "30ë¶„ ì´ˆê³¼ íƒ€ì„ì•„ì›ƒ"}
            CASE "submit_failed":
                RETURN retry_once(item, project_folder)
    
    CATCH NetworkError:
        RETURN retry_with_backoff(item, project_folder, max_retries=3, wait=30s)
```

### 4.5 ë“œë¼ì´ëŸ° ëª¨ë“œ

```pseudo
FUNCTION dry_run(project_folder):
    cmd = "python .agent/scripts/manus_slide.py {project_folder} --dry-run"
    output = run_command(cmd)
    
    // ì‹¤ì œ API í˜¸ì¶œ ì—†ì´ íŒŒì¼ ëª©ë¡ê³¼ ì œì¶œ ê³„íšë§Œ ì¶œë ¥
    PRINT output  // íŒŒì¼ ëª©ë¡, ì˜ˆìƒ ì†Œìš” ì‹œê°„, ë¹„ìš© ì¶”ì •
    RETURN output
```

### 4.6 ì»¤ë§¨ë“œë¼ì¸ ì¸í„°í˜ì´ìŠ¤

```bash
# ì›ìƒ· íŒŒì¼ ì œì¶œ
python .agent/scripts/manus_slide.py {í”„ë¡œì íŠ¸í´ë”} --file {ì„¸ì…˜ID}

# ë¶„í•  ì²­í¬ ì œì¶œ
python .agent/scripts/manus_slide.py {í”„ë¡œì íŠ¸í´ë”} --file {chunk_íŒŒì¼ëª…}

# ë“œë¼ì´ëŸ° (ì‹¤ì œ í˜¸ì¶œ ì—†ì´ ê³„íš í™•ì¸)
python .agent/scripts/manus_slide.py {í”„ë¡œì íŠ¸í´ë”} --dry-run

# íŒŒì¼ ì—…ë¡œë“œ ë¹„í™œì„±í™” (ê¸°ì¡´ ì¸ë¼ì¸ ë°©ì‹ìœ¼ë¡œ ì œì¶œ)
python .agent/scripts/manus_slide.py {í”„ë¡œì íŠ¸í´ë”} --no-upload
```

---

## 5. ì˜ì¡´ì„±

### 5.1 ì—…ìŠ¤íŠ¸ë¦¼ ì—ì´ì „íŠ¸

| ì—ì´ì „íŠ¸ | ì „ë‹¬ í•­ëª© | ì˜ì¡´ ìœ í˜• |
|----------|-----------|-----------|
| D2_Chunk_Splitter | Chunk Manifest + ì²­í¬/ì›ë³¸ íŒŒì¼ | í•„ìˆ˜ (step_3 ì™„ë£Œ í›„ ì‹¤í–‰) |
| D0_Orchestrator | í”„ë¡œì íŠ¸ í´ë” ê²½ë¡œ, ì‹¤í–‰ ì§€ì‹œ, `project_id` + `file_ids` (ì—…ë¡œë“œ ëª¨ë“œ ì‹œ) | í•„ìˆ˜ (ìµœì´ˆ ì‹¤í–‰ + ì¬ì œì¶œ ì§€ì‹œ) |

### 5.2 ë‹¤ìš´ìŠ¤íŠ¸ë¦¼ ì—ì´ì „íŠ¸

| ì—ì´ì „íŠ¸ | ì „ë‹¬ í•­ëª© | ì˜ì¡´ ìœ í˜• |
|----------|-----------|-----------|
| D4_Post_Processor | ë‹¤ìš´ë¡œë“œëœ PPTX íŒŒì¼ | í•„ìˆ˜ |
| D0_Orchestrator | ì œì¶œ ê²°ê³¼ ë¦¬í¬íŠ¸ | í•„ìˆ˜ (ì§„í–‰ í˜„í™© + ì˜ì‚¬ê²°ì •) |

### 5.3 ìŠ¤í‚¬ ì˜ì¡´ì„±

ì—†ìŒ. D3ëŠ” ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸(`manus_slide.py`)ë¥¼ ì‹¤í–‰í•˜ëŠ” ê¸°ê³„ì  ì—ì´ì „íŠ¸ì´ë¯€ë¡œ ë³„ë„ ìŠ¤í‚¬ ë¡œë”©ì´ ë¶ˆí•„ìš”í•©ë‹ˆë‹¤.

### 5.4 ì‹œìŠ¤í…œ ì˜ì¡´ì„±

| ì˜ì¡´ì„± | ìœ í˜• | ìš©ë„ | í•„ìˆ˜ ì—¬ë¶€ |
|--------|------|------|:---------:|
| `MANUS_API_KEY` | í™˜ê²½ë³€ìˆ˜ | Manus AI API ì¸ì¦ | âœ… |
| `.agent/scripts/manus_slide.py` | Python ìŠ¤í¬ë¦½íŠ¸ | Manus AI ì œì¶œ + í´ë§ + ë‹¤ìš´ë¡œë“œ | âœ… |
| `requests` | Python íŒ¨í‚¤ì§€ | HTTP API í†µì‹  | âœ… |
| `python-pptx` | Python íŒ¨í‚¤ì§€ | PPTX ë¡œë“œ í…ŒìŠ¤íŠ¸ (í›„ì²˜ë¦¬ìš©) | âš ï¸ ê²½ê³  |
| Python 3.x ëŸ°íƒ€ì„ | ì‹œìŠ¤í…œ | ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ | âœ… |
| ë„¤íŠ¸ì›Œí¬ ì—°ê²° | ì¸í”„ë¼ | Manus AI API í†µì‹  | âœ… |
| Manus Projects API | ì™¸ë¶€ API | í”„ë¡œì íŠ¸ ìƒì„± + instruction ì„¤ì • (ì—…ë¡œë“œ ëª¨ë“œ) | âš ï¸ ì—…ë¡œë“œ ëª¨ë“œ ì‹œ |
| Manus Files API | ì™¸ë¶€ API | ê³µí†µ í—¤ë” íŒŒì¼ ì—…ë¡œë“œ + presigned URL (ì—…ë¡œë“œ ëª¨ë“œ) | âš ï¸ ì—…ë¡œë“œ ëª¨ë“œ ì‹œ |

---

## 6. ë„ë©”ì¸ ëª¨ë¸

### 6.1 ì—”í‹°í‹°

#### SubmissionQueue

```
SubmissionQueue {
    items: List<SubmissionItem>      -- ì œì¶œ ëŒ€ê¸°ì—´ (ìˆœì„œ ë³´ì¥)
    total_count: Integer             -- ì „ì²´ ì œì¶œ í•­ëª© ìˆ˜
    completed_count: Integer         -- ì™„ë£Œëœ í•­ëª© ìˆ˜
    failed_count: Integer            -- ì‹¤íŒ¨í•œ í•­ëª© ìˆ˜
    started_at: Timestamp            -- ì œì¶œ ì‹œì‘ ì‹œê°
}
```

#### SubmissionItem

```
SubmissionItem {
    file_path: FilePath              -- ì²­í¬/ì›ë³¸ í”„ë¡¬í”„íŠ¸ íŒŒì¼ ê²½ë¡œ
    session_id: String               -- ì„¸ì…˜ ì‹ë³„ì (Day1_AM ë“±)
    chunk_index: Integer?            -- ì²­í¬ ë²ˆí˜¸ (nullì´ë©´ ì›ìƒ·)
    total_chunks: Integer            -- í•´ë‹¹ ì„¸ì…˜ì˜ ì´ ì²­í¬ ìˆ˜
    status: SubmissionStatus         -- í˜„ì¬ ìƒíƒœ
    task_id: String?                 -- Manus task ID (ì œì¶œ í›„ í• ë‹¹)
    elapsed_minutes: Float?          -- ì†Œìš” ì‹œê°„ (ë¶„)
    slide_count: Integer?            -- ìƒì„±ëœ ìŠ¬ë¼ì´ë“œ ìˆ˜
    pptx_path: FilePath?             -- ë‹¤ìš´ë¡œë“œëœ PPTX ê²½ë¡œ
    retry_count: Integer             -- ì¬ì‹œë„ íšŸìˆ˜ (0-based)
    project_id: String?              -- Manus í”„ë¡œì íŠ¸ ID (ì—…ë¡œë“œ ëª¨ë“œ ì‹œ)
    file_ids: Dict?                  -- ì—…ë¡œë“œëœ íŒŒì¼ ID ë§µ (ì—…ë¡œë“œ ëª¨ë“œ ì‹œ)
}
```

#### ManusTaskLog

```
ManusTaskLog {
    entries: List<TaskLogEntry>      -- íƒœìŠ¤í¬ ë¡œê·¸ í•­ëª©ë“¤
    file_path: FilePath              -- manus_task_log.json ê²½ë¡œ
}

TaskLogEntry {
    task_id: String                  -- Manus íƒœìŠ¤í¬ ID
    file_name: String                -- ì œì¶œ íŒŒì¼ëª…
    status: String                   -- completed / submit_failed / timeout / completed_no_file
    elapsed_seconds: Integer         -- ì†Œìš” ì‹œê°„ (ì´ˆ)
    shareable_link: URL?             -- ê³µìœ  ë§í¬ (completed_no_file ì‹œ)
    pptx_file: FilePath?             -- ë‹¤ìš´ë¡œë“œëœ PPTX ê²½ë¡œ
    submitted_at: Timestamp          -- ì œì¶œ ì‹œê°
    completed_at: Timestamp?         -- ì™„ë£Œ ì‹œê°
}
```

### 6.2 ê°’ ê°ì²´

#### SubmissionStatus (Enum)

```
SubmissionStatus = {
    PENDING,              -- ëŒ€ê¸° ì¤‘
    SUBMITTING,           -- ì œì¶œ ì¤‘ (API í˜¸ì¶œ ì§„í–‰)
    RUNNING,              -- Manus AI ì²˜ë¦¬ ì¤‘ (í´ë§ ëŒ€ê¸°)
    COMPLETED,            -- ì™„ë£Œ (PPTX ë‹¤ìš´ë¡œë“œ ì„±ê³µ)
    COMPLETED_NO_FILE,    -- ì™„ë£Œí–ˆìœ¼ë‚˜ PPTX ë¯¸ìƒì„±
    SUBMIT_FAILED,        -- ì œì¶œ ì‹¤íŒ¨ (API ì˜¤ë¥˜)
    TIMEOUT,              -- íƒ€ì„ì•„ì›ƒ (30ë¶„ ì´ˆê³¼)
    NETWORK_ERROR,        -- ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜
    RETRYING              -- ì¬ì‹œë„ ì¤‘
}
```

#### SubmissionResult

```
SubmissionResult {
    status_icon: String              -- âœ… / âš ï¸ / âŒ
    task_id: String                  -- Manus íƒœìŠ¤í¬ ID
    elapsed: String                  -- "Në¶„" í˜•ì‹
    slide_count: Integer?            -- ìƒì„± ìŠ¬ë¼ì´ë“œ ìˆ˜
    note: String?                    -- ì¶”ê°€ ì•ˆë‚´ (ìˆ˜ë™ ë‹¤ìš´ë¡œë“œ ë“±)
    upload_mode: Boolean             -- íŒŒì¼ ì—…ë¡œë“œ ëª¨ë“œ ì‚¬ìš© ì—¬ë¶€
    project_id: String?              -- Manus í”„ë¡œì íŠ¸ ID (ì—…ë¡œë“œ ëª¨ë“œ ì‹œ)
}
```

#### SubmissionOrder

```
SubmissionOrder {
    day_order: Integer               -- Day ë²ˆí˜¸ (1, 2, ...)
    session_order: String            -- AM / PM
    chunk_order: Integer             -- ì²­í¬ ë²ˆí˜¸ (1, 2, ...)
}
// ì •ë ¬: Day â†’ AM/PM â†’ êµì‹œ ìˆœ
```

---

## 7. ìƒíƒœ ì „ì´

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ PENDING  â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                         â”‚ preflight OK + ì œì¶œ ì‹œì‘
                         â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ SUBMITTING   â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                  ì„±ê³µ   â”‚    â”‚ API ì˜¤ë¥˜
                         â”‚    â–¼
                         â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ â”‚ SUBMIT_FAILEDâ”‚â”€â”€â”€â”€ ì¬ì‹œë„ 1íšŒ â”€â”€â”€â–º SUBMITTING
                         â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚        â”‚ ì¬ì‹œë„ ì‹¤íŒ¨
                         â”‚        â–¼
                         â”‚   [D0ì— ë³´ê³  â†’ ê²©ë¦¬]
                         â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ RUNNING  â”‚ â—„â”€â”€ 30ì´ˆ ê°„ê²© í´ë§
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                         â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼          â–¼          â–¼          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚COMPLETED â”‚ â”‚TIMEOUT â”‚ â”‚NETWORK â”‚ â”‚COMPLETED   â”‚
        â”‚(PPTX âœ…) â”‚ â”‚(30ë¶„)  â”‚ â”‚_ERROR  â”‚ â”‚_NO_FILE    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚          â”‚           â”‚
                          â–¼          â–¼           â–¼
                    [D0ì— ë³´ê³ ]  [30ì´ˆ ëŒ€ê¸°   [shareable_link
                     ìˆ˜ë™ í™•ì¸    ì¬ì‹œë„ 3íšŒ]   ê¸°ë¡, ìˆ˜ë™
                     ì•ˆë‚´                      ë‹¤ìš´ë¡œë“œ ì•ˆë‚´]
```

### 7.1 íŒŒì¼ ì—…ë¡œë“œ ëª¨ë“œ ìƒíƒœ ì „ì´

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ FILE_UPLOAD  â”‚  (D0 main()ì—ì„œ ì‹¤í–‰)
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                  ì„±ê³µ   â”‚    â”‚ ì‹¤íŒ¨
                         â”‚    â–¼
                         â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ â”‚ UPLOAD_FALLBACK  â”‚ â†’ ê¸°ì¡´ ì¸ë¼ì¸ ëª¨ë“œë¡œ ì „í™˜
                         â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ SUBMITTING       â”‚  (project_id + file_ids í¬í•¨)
                    â”‚ (ì—…ë¡œë“œ ëª¨ë“œ)     â”‚  â†’ create_task(project_id=..., file_ids=...)
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í•µì‹¬ ì „ì´ ê·œì¹™**:
- ë™ì‹œ ì œì¶œ(ë³‘ë ¬) ê¸ˆì§€ â€” í•œ ë²ˆì— í•˜ë‚˜ì˜ ì•„ì´í…œë§Œ SUBMITTING/RUNNING ìƒíƒœ
- `submit_failed`: 1íšŒ ìë™ ì¬ì‹œë„ í›„ ì‹¤íŒ¨ ì‹œ ê²©ë¦¬
- ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: 30ì´ˆ ëŒ€ê¸° í›„ ìµœëŒ€ 3íšŒ ì¬ì‹œë„
- `timeout`: 30ë¶„ ì´ˆê³¼ ì‹œ ìë™ ë§Œë£Œ, D0ì— ìˆ˜ë™ í™•ì¸ ì•ˆë‚´
- `completed_no_file`: PPTX ë¯¸ìƒì„±ì´ì§€ë§Œ shareable_linkë¡œ ìˆ˜ë™ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥
- íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œ: ê¸°ì¡´ ì¸ë¼ì¸ ë°©ì‹ìœ¼ë¡œ ìë™ í´ë°± (UPLOAD_FALLBACK)

---

## 8. ì˜¤ë¥˜ ì²˜ë¦¬

| ì˜¤ë¥˜ ìœ í˜• | ì›ì¸ | ëŒ€ì‘ ì „ëµ | ì‹¬ê°ë„ |
|-----------|------|-----------|:------:|
| `MANUS_API_KEY` ë¯¸ì„¤ì • | í™˜ê²½ë³€ìˆ˜ ëˆ„ë½, `.claude/.env` ì—†ìŒ | ABORT â€” D0ì— ì¦‰ì‹œ ë³´ê³  | ğŸ”´ CRITICAL |
| `requests` ë¯¸ì„¤ì¹˜ | Python ì˜ì¡´ì„± ëˆ„ë½ | ABORT â€” `pip install requests` ì•ˆë‚´ | ğŸ”´ CRITICAL |
| `python-pptx` ë¯¸ì„¤ì¹˜ | Python ì˜ì¡´ì„± ëˆ„ë½ | WARN â€” í›„ì²˜ë¦¬ ê±´ë„ˆëœ€ ê²½ê³  | ğŸŸ¡ WARNING |
| `submit_failed` (API ì˜¤ë¥˜) | Manus API ì„œë²„ ì˜¤ë¥˜, ì¸ì¦ ì‹¤íŒ¨ | 1íšŒ ì¬ì‹œë„ â†’ ì‹¤íŒ¨ ì‹œ D0 ë³´ê³ , ê²©ë¦¬ | ğŸŸ  HIGH |
| `timeout` (30ë¶„ ì´ˆê³¼) | Manus AI ì²˜ë¦¬ ì§€ì—°, ëŒ€ìš©ëŸ‰ í”„ë¡¬í”„íŠ¸ | D0ì— ë³´ê³ , ìˆ˜ë™ í™•ì¸ ì•ˆë‚´ | ğŸŸ  HIGH |
| `completed_no_file` | PPTX ìƒì„± ì‹¤íŒ¨ (Manus ë‚´ë¶€ ì˜¤ë¥˜) | shareable_link ê¸°ë¡, ìˆ˜ë™ ë‹¤ìš´ë¡œë“œ ì•ˆë‚´ | ğŸŸ¡ WARNING |
| ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ | ì—°ê²° ëŠê¹€, DNS ì‹¤íŒ¨, íƒ€ì„ì•„ì›ƒ | 30ì´ˆ ëŒ€ê¸° â†’ ìµœëŒ€ 3íšŒ ì¬ì‹œë„ | ğŸŸ  HIGH |
| `manus_slide.py` ë¯¸ì¡´ì¬ | ìŠ¤í¬ë¦½íŠ¸ ê²½ë¡œ ì˜¤ë¥˜ | ABORT â€” ìŠ¤í¬ë¦½íŠ¸ ê²½ë¡œ í™•ì¸ ì•ˆë‚´ | ğŸ”´ CRITICAL |
| ì¶œë ¥ ë””ë ‰í† ë¦¬ ì“°ê¸° ì‹¤íŒ¨ | ê¶Œí•œ ë¶€ì¡±, ë””ìŠ¤í¬ í’€ | ABORT â€” ë””ë ‰í† ë¦¬ ê¶Œí•œ/ê³µê°„ í™•ì¸ | ğŸ”´ CRITICAL |
| ì²­í¬ íŒŒì¼ ìˆœì„œ ë¶ˆì¼ì¹˜ | Chunk Manifestì™€ ì‹¤ì œ íŒŒì¼ ë¶ˆì¼ì¹˜ | ì œì¶œ ì¤‘ë‹¨, D0ì— ë³´ê³  | ğŸŸ  HIGH |
| íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨ | Projects/Files API ì˜¤ë¥˜, presigned URL ë§Œë£Œ | ê¸°ì¡´ ì¸ë¼ì¸ ë°©ì‹ìœ¼ë¡œ ìë™ í´ë°± | ğŸŸ¡ WARNING |

**ì‹¤íŒ¨ ê²©ë¦¬ ì›ì¹™**: í•˜ë‚˜ì˜ íŒŒì¼/ì²­í¬ ì‹¤íŒ¨ê°€ ì „ì²´ ì œì¶œì„ ì¤‘ë‹¨ì‹œí‚¤ì§€ ì•ŠìŠµë‹ˆë‹¤. ì‹¤íŒ¨í•œ í•­ëª©ì„ ê²©ë¦¬í•˜ê³  ë‚˜ë¨¸ì§€ë¥¼ ê³„ì† ì œì¶œí•©ë‹ˆë‹¤. ëª¨ë“  ì‹¤íŒ¨ëŠ” ì œì¶œ ê²°ê³¼ ë¦¬í¬íŠ¸ì— ê¸°ë¡ë©ë‹ˆë‹¤.

---

## 9. í’ˆì§ˆ ê¸°ì¤€

### 9.1 ì œì¶œ ì™„ì „ì„±

| ê¸°ì¤€ | ì„ê³„ê°’ | ì¸¡ì • ë°©ë²• |
|------|--------|-----------|
| ì „ì²´ ì œì¶œ ì„±ê³µë¥  | â‰¥ 80% | (ì„±ê³µ íŒŒì¼ ìˆ˜ / ì „ì²´ íŒŒì¼ ìˆ˜) Ã— 100 |
| ë“œë¼ì´ëŸ° ì‚¬ì „ í™•ì¸ | í•„ìˆ˜ ê¶Œì¥ | `--dry-run` ì‹¤í–‰ ì—¬ë¶€ |
| ì œì¶œ ìˆœì„œ ì¤€ìˆ˜ | 100% | Day â†’ AM/PM â†’ êµì‹œ ìˆœ ê²€ì¦ |

### 9.2 ëª¨ë‹ˆí„°ë§ ì •í™•ì„±

| ê¸°ì¤€ | ì„ê³„ê°’ | ì¸¡ì • ë°©ë²• |
|------|--------|-----------|
| ìƒíƒœ ì¶”ì  ì •í™•ì„± | 100% | manus_task_log.jsonê³¼ ë¦¬í¬íŠ¸ ì¼ì¹˜ |
| ì§„í–‰ í˜„í™© ë³´ê³  | ë§¤ íŒŒì¼/ì²­í¬ ì™„ë£Œ ì‹œ | D0ì— ë³´ê³  ë¹ˆë„ |
| ì†Œìš” ì‹œê°„ ê¸°ë¡ | Â±10ì´ˆ ì •í™•ë„ | íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ ê³„ì‚° |

### 9.3 ì¬ì‹œë„ íš¨ìœ¨ì„±

| ê¸°ì¤€ | ì„ê³„ê°’ | ì¸¡ì • ë°©ë²• |
|------|--------|-----------|
| submit_failed ì¬ì‹œë„ | ìµœëŒ€ 1íšŒ | ì¬ì‹œë„ ì¹´ìš´í„° |
| ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì¬ì‹œë„ | ìµœëŒ€ 3íšŒ (30ì´ˆ ê°„ê²©) | ì¬ì‹œë„ ì¹´ìš´í„° + ë°±ì˜¤í”„ |
| ì¬ì œì¶œ ë£¨í”„ (D0 ì§€ì‹œ) | ì²­í¬ë‹¹ ìµœëŒ€ 2íšŒ | ì›Œí¬í”Œë¡œìš° `max_retries: 2` |

### 9.4 ë¹„ìš© ìµœì í™”

| ê¸°ì¤€ | ì„¤ëª… |
|------|------|
| ë“œë¼ì´ëŸ° ìš°ì„  | ì‹¤ì œ API í˜¸ì¶œ ì „ `--dry-run`ìœ¼ë¡œ ê³„íš í™•ì¸ |
| ìˆœì°¨ ì œì¶œ | ë™ì‹œ ì œì¶œ ê¸ˆì§€ (API ì•ˆì •ì„± + ë¹„ìš© ì œì–´) |
| ì‹¤íŒ¨ ê²©ë¦¬ | ì‹¤íŒ¨í•œ ì²­í¬ë§Œ ì¬ì œì¶œ (ì „ì²´ ì¬ì œì¶œ ë°©ì§€) |
| íŒŒì¼ ì—…ë¡œë“œ ëª¨ë“œ | ê³µí†µ í—¤ë” 1íšŒ ì—…ë¡œë“œë¡œ ì²­í¬ë³„ ì¤‘ë³µ ì „ì†¡ ì œê±° (4ë¶„í•  ì‹œ ~309ì¤„/21KB ì ˆê°) |

---

## 10. ë¡œê¹…

### 10.1 ì´ë²¤íŠ¸ ì •ì˜

| ì´ë²¤íŠ¸ | event_type | ê¸°ë¡ ì‹œì  | ì£¼ìš” í•„ë“œ |
|--------|-----------|-----------|-----------|
| í™˜ê²½ ê²€ì¦ ì‹œì‘ | `START` | preflight check ì‹œì‘ | `step_id: "step_4_manus_submission"`, `phase: "preflight"` |
| í™˜ê²½ ê²€ì¦ ì™„ë£Œ | `DECISION` | preflight ê²°ê³¼ | `decision: "preflight_pass"`, `details: {api_key: true, requests: true, python_pptx: true}` |
| íŒŒì¼ ì—…ë¡œë“œ ì‹¤í–‰ | `START` | í”„ë¡œì íŠ¸ ìƒì„± + íŒŒì¼ ì—…ë¡œë“œ ì‹œì‘ | `phase: "file_upload"`, `upload_mode: true` |
| íŒŒì¼ ì—…ë¡œë“œ ì™„ë£Œ | `END` | í”„ë¡œì íŠ¸ ìƒì„± + íŒŒì¼ ì—…ë¡œë“œ ì™„ë£Œ | `project_id`, `file_ids`, `upload_count` |
| íŒŒì¼ ì—…ë¡œë“œ í´ë°± | `DECISION` | ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì¸ë¼ì¸ ì „í™˜ | `decision: "upload_fallback"`, `error` |
| íŒŒì¼ ì œì¶œ ì‹œì‘ | `START` | ê° íŒŒì¼/ì²­í¬ ì œì¶œ ì‹œì‘ | `sub_step: "submit_{session_id}_{chunk}"` |
| íŒŒì¼ ì œì¶œ ì™„ë£Œ | `END` | ì œì¶œ + ë‹¤ìš´ë¡œë“œ ì™„ë£Œ | `sub_step`, `task_id`, `elapsed`, `slide_count` |
| íŒŒì¼ ì œì¶œ ì‹¤íŒ¨ | `FAIL` | ì œì¶œ/í´ë§ ì‹¤íŒ¨ | `error_type`, `retry_count`, `task_id` |
| ì¬ì‹œë„ | `RETRY` | ì¬ì‹œë„ ì‹œì‘ | `retry_count`, `wait_seconds`, `reason` |
| ì „ì²´ ì œì¶œ ì™„ë£Œ | `END` | ëª¨ë“  íŒŒì¼ ì²˜ë¦¬ ì™„ë£Œ | `total_success`, `total_failed`, `total_elapsed` |

### 10.2 í•µì‹¬ ë©”íŠ¸ë¦­

| ë©”íŠ¸ë¦­ | ë‹¨ìœ„ | ì„¤ëª… |
|--------|------|------|
| `submission_count` | ê±´ | ì „ì²´ ì œì¶œ ì‹œë„ íšŸìˆ˜ |
| `success_count` | ê±´ | ì„±ê³µ ê±´ìˆ˜ |
| `failure_count` | ê±´ | ì‹¤íŒ¨ ê±´ìˆ˜ (ê²©ë¦¬ í¬í•¨) |
| `retry_count` | ê±´ | ì´ ì¬ì‹œë„ íšŸìˆ˜ |
| `total_elapsed_minutes` | ë¶„ | ì „ì²´ ì†Œìš” ì‹œê°„ |
| `avg_submission_time` | ë¶„ | íŒŒì¼ë‹¹ í‰ê·  ì†Œìš” ì‹œê°„ |
| `api_calls` | ê±´ | Manus API í˜¸ì¶œ ì´ íšŸìˆ˜ (í´ë§ í¬í•¨) |
| `upload_mode` | bool | íŒŒì¼ ì—…ë¡œë“œ ëª¨ë“œ ì‚¬ìš© ì—¬ë¶€ |
| `upload_saved_bytes` | bytes | ì—…ë¡œë“œ ëª¨ë“œë¡œ ì ˆê°ëœ ë°ì´í„°ëŸ‰ |

### 10.3 ë¹„ìš© ì‚°ì • ê³µì‹

D3ëŠ” `quick` ì¹´í…Œê³ ë¦¬ (Haikuê¸‰):

```
í† í° ì¶”ì •: est_tokens = round(bytes Ã· 3.3)
ë¹„ìš© = (input_tokens Ã— $0.00025 / 1K) + (output_tokens Ã— $0.00125 / 1K)
```

> **ì°¸ê³ **: D3 ìì²´ì˜ LLM ë¹„ìš©ì€ ë¯¸ë¯¸í•©ë‹ˆë‹¤. ì£¼ìš” ë¹„ìš©ì€ **Manus AI API í˜¸ì¶œ ë¹„ìš©**ì´ë©°, ì´ëŠ” ë³„ë„ ê³¼ê¸ˆ ì²´ê³„ë¥¼ ë”°ë¦…ë‹ˆë‹¤. D3ì˜ ì—­í• ì€ ì´ ì™¸ë¶€ ë¹„ìš©ì„ ìµœì†Œí™”í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. íŒŒì¼ ì—…ë¡œë“œ ëª¨ë“œëŠ” ê³µí†µ í—¤ë” ì¤‘ë³µ ì „ì†¡ ì œê±°ë¥¼ í†µí•´ API ë¹„ìš©ì„ ì¶”ê°€ ì ˆê°í•©ë‹ˆë‹¤.

---

## 11. ì„¤ì •

### 11.1 config.json ë§¤í•‘

```json
{
    "D3_Submission_Manager": {
        "category": "quick",
        "note": "manus_slide.py ì‹¤í–‰Â·ëª¨ë‹ˆí„°ë§ â€” ê¸°ê³„ì  ì‘ì—…"
    }
}
```

### 11.2 ì›Œí¬í”Œë¡œìš° YAML ë§¤í•‘

```yaml
- id: step_4_manus_submission
  agent: "07_manus_slide/D3_Submission_Manager"
  action: "submit_and_download"
  depends_on: "step_3_chunk_splitting"
  input: "Chunk Manifest, Chunk files (or original files), MANUS_API_KEY, project_id + file_ids (optional, ì—…ë¡œë“œ ëª¨ë“œ), Output Language: Korean"
  output: "Submission Log, Downloaded PPTX files (07_ManusSlides/)"
```

### 11.3 ì œì¶œ íŒŒë¼ë¯¸í„°

| íŒŒë¼ë¯¸í„° | ê°’ | ì„¤ëª… |
|----------|-----|------|
| í´ë§ ê°„ê²© | 30ì´ˆ | `manus_slide.py` ë‚´ë¶€ ì„¤ì • |
| íƒ€ì„ì•„ì›ƒ | 30ë¶„ | íŒŒì¼ë‹¹ ìµœëŒ€ ëŒ€ê¸° ì‹œê°„ |
| submit_failed ì¬ì‹œë„ | 1íšŒ | API ì œì¶œ ì‹¤íŒ¨ ì‹œ |
| ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì¬ì‹œë„ | 3íšŒ (30ì´ˆ ê°„ê²©) | ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì‹¤íŒ¨ ì‹œ |
| ì›Œí¬í”Œë¡œìš° ì¬ì œì¶œ | ìµœëŒ€ 2íšŒ | `max_retries: 2` (step_7 â†’ step_4) |
| ë™ì‹œ ì œì¶œ | ê¸ˆì§€ | ìˆœì°¨ ì²˜ë¦¬ë§Œ í—ˆìš© |

### 11.4 í™˜ê²½ë³€ìˆ˜

| ë³€ìˆ˜ | í•„ìˆ˜ | í´ë°± | ì„¤ëª… |
|------|:----:|------|------|
| `MANUS_API_KEY` | âœ… | `.claude/.env` | Manus AI API ì¸ì¦ í‚¤ |

---

## 12. í™•ì¥ í¬ì¸íŠ¸

### 12.1 ë³‘ë ¬ ì œì¶œ (ë¯¸ë˜)

í˜„ì¬ëŠ” API ì•ˆì •ì„±ì„ ìœ„í•´ ìˆœì°¨ ì œì¶œë§Œ ì§€ì›í•©ë‹ˆë‹¤. Manus APIê°€ ë™ì‹œ ìš”ì²­ì„ ì•ˆì •ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ë©´:
- ì„¸ì…˜ ë‹¨ìœ„ ë³‘ë ¬í™” (ê°™ì€ ì„¸ì…˜ì˜ ì²­í¬ëŠ” ìˆœì°¨, ë‹¤ë¥¸ ì„¸ì…˜ì€ ë³‘ë ¬)
- ë™ì‹œ ì œì¶œ ì œí•œ (concurrency limit) íŒŒë¼ë¯¸í„° ì¶”ê°€

### 12.2 `--chunk-dir` ì˜µì…˜

í˜„ì¬ `manus_slide.py`ëŠ” `--file` ì˜µì…˜ìœ¼ë¡œ ê°œë³„ íŒŒì¼ë§Œ ì§€ì • ê°€ëŠ¥í•©ë‹ˆë‹¤. í™•ì¥ ì‹œ:
- `--chunk-dir` ì˜µì…˜ìœ¼ë¡œ ì²­í¬ ë””ë ‰í† ë¦¬ ì¼ê´„ ì§€ì •
- ìë™ ìˆœì„œ ê°ì§€ (íŒŒì¼ëª… ê¸°ë°˜)

### 12.3 ë¹„ìš© ì¶”ì  ëŒ€ì‹œë³´ë“œ

Manus API í˜¸ì¶œ ë¹„ìš©ì„ ì‹¤ì‹œê°„ ì¶”ì í•˜ëŠ” ëŒ€ì‹œë³´ë“œ:
- íŒŒì¼ë³„ API í˜¸ì¶œ íšŸìˆ˜ (ì œì¶œ + í´ë§)
- ëˆ„ì  ë¹„ìš© ì¶”ì •
- ì¬ì‹œë„ë¡œ ì¸í•œ ì¶”ê°€ ë¹„ìš©

### 12.4 í´ë§ ì „ëµ ìµœì í™”

ê³ ì • 30ì´ˆ í´ë§ ëŒ€ì‹  ì ì‘í˜• í´ë§:
- ì´ˆë°˜: 60ì´ˆ ê°„ê²© (ëŒ€ë¶€ë¶„ 3ë¶„ ì´ìƒ ì†Œìš”)
- ì¤‘ë°˜: 30ì´ˆ ê°„ê²©
- í›„ë°˜ (ì˜ˆìƒ ì™„ë£Œ ì‹œê°„ ë¶€ê·¼): 15ì´ˆ ê°„ê²©

### 12.5 ëŒ€ì²´ AI ì„œë¹„ìŠ¤ ì§€ì›

Manus AI ì™¸ ë‹¤ë¥¸ ìŠ¬ë¼ì´ë“œ ìƒì„± ì„œë¹„ìŠ¤ í†µí•©:
- ì„œë¹„ìŠ¤ë³„ ì–´ëŒ‘í„° íŒ¨í„´
- `manus_slide.py` â†’ `slide_generator.py` (ë²”ìš©í™”)

### 12.6 íŒŒì¼ ì—…ë¡œë“œ ëª¨ë“œ (êµ¬í˜„ ì™„ë£Œ)

ê³µí†µ í—¤ë”(â‘ â‘¡â‘£â‘¤)ë¥¼ Manus Files APIë¡œ ì‚¬ì „ ì—…ë¡œë“œí•˜ê³ , `SLIDE_GENERATION_PREFIX`ë¥¼ Project instructionìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ì²­í¬ë³„ ì¤‘ë³µ ì „ì†¡ì„ ì œê±°í•˜ëŠ” ìµœì í™”:

| í•­ëª© | ì„¤ëª… |
|------|------|
| **êµ¬í˜„ ìœ„ì¹˜** | `manus_slide.py` â€” `create_project()`, `upload_file()`, `setup_project_with_files()` |
| **API ì—”ë“œí¬ì¸íŠ¸** | `POST /v1/projects`, `POST /v1/files` + `PUT presigned_url`, `POST /v1/tasks` (projectId + attachments) |
| **ì ˆê° íš¨ê³¼** | 4ë¶„í•  ì‹œ ê³µí†µ í—¤ë” ~103ì¤„ Ã— 3 = ~309ì¤„(21KB) ì ˆê° |
| **í´ë°±** | ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œ ê¸°ì¡´ ì¸ë¼ì¸ ë°©ì‹ìœ¼ë¡œ ìë™ ì „í™˜ (`--no-upload` ë™ì‘ê³¼ ë™ì¼) |
| **ì œì•½** | ì—…ë¡œë“œ íŒŒì¼ 48ì‹œê°„ ìë™ ì‚­ì œ, presigned URL 3ë¶„ ë§Œë£Œ |
| **CLI ì˜µì…˜** | `--no-upload` â€” íŒŒì¼ ì—…ë¡œë“œ ë¹„í™œì„±í™”, ê¸°ì¡´ ì¸ë¼ì¸ ë°©ì‹ ê°•ì œ |

---

## ë¶€ë¡

### A. manus_slide.py ì¸í„°í˜ì´ìŠ¤

```bash
# ê¸°ë³¸ ì‹¤í–‰ (íŒŒì¼ ì—…ë¡œë“œ ëª¨ë“œ â€” ê¸°ë³¸ê°’)
python .agent/scripts/manus_slide.py {í”„ë¡œì íŠ¸í´ë”} --file {ì„¸ì…˜ID}

# ì²­í¬ íŒŒì¼ ì‹¤í–‰
python .agent/scripts/manus_slide.py {í”„ë¡œì íŠ¸í´ë”} --file {chunk_íŒŒì¼ëª…}

# ë“œë¼ì´ëŸ°
python .agent/scripts/manus_slide.py {í”„ë¡œì íŠ¸í´ë”} --dry-run

# íŒŒì¼ ì—…ë¡œë“œ ë¹„í™œì„±í™” (ê¸°ì¡´ ì¸ë¼ì¸ ë°©ì‹)
python .agent/scripts/manus_slide.py {í”„ë¡œì íŠ¸í´ë”} --no-upload
```

**ì£¼ìš” ë™ì‘**:
1. í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì½ì–´ Manus APIì— ì œì¶œ
2. 30ì´ˆ ê°„ê²©ìœ¼ë¡œ íƒœìŠ¤í¬ ìƒíƒœ í´ë§
3. ì™„ë£Œ ì‹œ PPTX íŒŒì¼ ë‹¤ìš´ë¡œë“œ â†’ `07_ManusSlides/`
4. `manus_task_log.json`ì— ê²°ê³¼ ê¸°ë¡
5. `strip_headers_footers()` ìë™ ì‹¤í–‰ (ë‹¤ìš´ë¡œë“œ í›„ ì¦‰ì‹œ)
6. **íŒŒì¼ ì—…ë¡œë“œ ëª¨ë“œ** (ê¸°ë³¸): `setup_project_with_files()` â†’ í”„ë¡œì íŠ¸ ìƒì„± + ê³µí†µ í—¤ë” ì—…ë¡œë“œ â†’ `create_task(project_id=..., file_ids=...)` â†’ ë™ì  ì½˜í…ì¸ (â‘¢â‘¥)ë§Œ ì „ì†¡
7. **ì¸ë¼ì¸ ëª¨ë“œ** (`--no-upload`): ê¸°ì¡´ ë°©ì‹ â€” ê³µí†µ í—¤ë” + PREFIXë¥¼ ë§¤ ì²­í¬ í”„ë¡¬í”„íŠ¸ì— í¬í•¨í•˜ì—¬ ì „ì†¡

### B. ì œì¶œ ìˆœì„œ ì˜ˆì‹œ

```
í”„ë¡œì íŠ¸: 2026-02-20_AI_í”„ë¡œê·¸ë˜ë°
â”œâ”€â”€ Day1_AM (1200ì¤„) â†’ chunk_1of2, chunk_2of2
â”œâ”€â”€ Day1_PM (800ì¤„)  â†’ ì›ìƒ·
â””â”€â”€ Day2_AM (900ì¤„)  â†’ ì›ìƒ·

ì œì¶œ ìˆœì„œ:
1. Day1_AM_chunk_1of2
2. Day1_AM_chunk_2of2
3. Day1_PM
4. Day2_AM

ì´ 4ê±´ ìˆœì°¨ ì œì¶œ, ì˜ˆìƒ ì†Œìš”: 15~30ë¶„

ì—…ë¡œë“œ ëª¨ë“œ ì‹œ:
- í”„ë¡œì íŠ¸ ìƒì„± 1íšŒ + ê³µí†µ í—¤ë” ì—…ë¡œë“œ 1íšŒ (ì‚¬ì „ ì‹¤í–‰)
- ê° ì²­í¬ ì œì¶œ ì‹œ project_id + file_ids í¬í•¨
- Day1_AM ì²­í¬ì—ì„œ ê³µí†µ í—¤ë”(~103ì¤„) Ã— 2 = ~206ì¤„ ì ˆê°
```

### C. ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤ë³„ í–‰ë™ ë§¤íŠ¸ë¦­ìŠ¤

| ì‹œë‚˜ë¦¬ì˜¤ | ìë™ ì¬ì‹œë„ | D0 ë³´ê³  | ìˆ˜ë™ ê°œì… |
|----------|:---------:|:------:|:--------:|
| API ì¸ì¦ ì‹¤íŒ¨ | âœ… 1íšŒ | âœ… | âŒ (ì¬ì‹œë„ë¡œ í•´ê²°) |
| API ì„œë²„ 500 | âœ… 1íšŒ | âœ… | ì¬ì‹œë„ ì‹¤íŒ¨ ì‹œ |
| ë„¤íŠ¸ì›Œí¬ ëŠê¹€ | âœ… 3íšŒ | âœ… | 3íšŒ ì‹¤íŒ¨ ì‹œ |
| 30ë¶„ íƒ€ì„ì•„ì›ƒ | âŒ | âœ… | âœ… ìˆ˜ë™ í™•ì¸ |
| PPTX ë¯¸ìƒì„± | âŒ | âœ… | âœ… ìˆ˜ë™ ë‹¤ìš´ë¡œë“œ |
| íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨ | âŒ (í´ë°±) | âœ… | âŒ (ì¸ë¼ì¸ ìë™ ì „í™˜) |
| ì „ì²´ ì„±ê³µ | â€” | âœ… | âŒ |

### D. manus_slide.py ì£¼ìš” API í•¨ìˆ˜ (v1.1 ì¶”ê°€)

| í•¨ìˆ˜ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… |
|------|-----------|------|
| `create_project(session, name, instruction)` | `POST /v1/projects` | Manus í”„ë¡œì íŠ¸ ìƒì„±, SLIDE_GENERATION_PREFIXë¥¼ instructionìœ¼ë¡œ ì„¤ì • |
| `upload_file(session, filepath)` | `POST /v1/files` + `PUT presigned_url` | íŒŒì¼ ì—…ë¡œë“œ í›„ file_id ë°˜í™˜ |
| `setup_project_with_files(session, prompts, project_dir)` | ìœ„ ë‘ í•¨ìˆ˜ ë°°ì¹˜ í˜¸ì¶œ | í”„ë¡œì íŠ¸ ìƒì„± + ê³µí†µ í—¤ë”(â‘ â‘¡â‘£â‘¤) ì—…ë¡œë“œ â†’ (project_id, file_ids_map) ë°˜í™˜ |
| `create_task(session, prompt, filename, project_id, file_ids)` | `POST /v1/tasks` | ì—…ë¡œë“œ ëª¨ë“œ ì‹œ projectId + attachments(file_id) í¬í•¨í•˜ì—¬ íƒœìŠ¤í¬ ìƒì„± |
